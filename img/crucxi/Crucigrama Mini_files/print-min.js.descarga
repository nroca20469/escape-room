/*! For license information please see print-min.js.LICENSE.txt */
(()=>{var n={6926:function(n){!function(r){"use strict";const t=function(){let n=0;return{escape:function(n){return n.replace(/([.*+?^${}()|[]\/\\])/g,"\\$1")},isDataUrl:function(n){return-1!==n.search(/^(data:)/)},canvasToBlob:function(n){return n.toBlob?new Promise((function(r){n.toBlob(r)})):function(n){return new Promise((function(r){var t=d(n.toDataURL().split(",")[1]),e=t.length,o=new Uint8Array(e);for(let n=0;n<e;n++)o[n]=t.charCodeAt(n);r(new Blob([o],{type:"image/png"}))}))}(n)},resolveUrl:function(n,r){var t=document.implementation.createHTMLDocument(),e=t.createElement("base"),o=(t.head.appendChild(e),t.createElement("a"));return t.body.appendChild(o),e.href=r,o.href=n,o.href},getAndEncode:function(n){let r=f.impl.urlCache.find((function(r){return r.url===n}));return r||(r={url:n,promise:null},f.impl.urlCache.push(r)),null===r.promise&&(f.impl.options.cacheBust&&(n+=(/\?/.test(n)?"&":"?")+(new Date).getTime()),r.promise=new Promise((function(r){const t=f.impl.options.httpTimeout,e=new XMLHttpRequest;let o;var i;function a(n){console.error(n),r("")}e.onreadystatechange=function(){if(4===e.readyState)if(200!==e.status)o?r(o):a(`cannot fetch resource: ${n}, status: `+e.status);else{const n=new FileReader;n.onloadend=function(){r(n.result)},n.readAsDataURL(e.response)}},e.ontimeout=function(){o?r(o):a(`timeout of ${t}ms occured while fetching resource: `+n)},e.responseType="blob",e.timeout=t,f.impl.options.useCredentials&&(e.withCredentials=!0),e.open("GET",n,!0),e.send(),f.impl.options.imagePlaceholder&&(i=f.impl.options.imagePlaceholder.split(/,/))&&i[1]&&(o=i[1])}))),r.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+n++},delay:function(n){return function(r){return new Promise((function(t){setTimeout((function(){t(r)}),n)}))}},asArray:function(n){var r=[],t=n.length;for(let e=0;e<t;e++)r.push(n[e]);return r},escapeXhtml:function(n){return n.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(n){return"data:,"!==n?new Promise((function(r,t){const e=new Image;f.impl.options.useCredentials&&(e.crossOrigin="use-credentials"),e.onload=function(){window&&window.requestAnimationFrame?window.requestAnimationFrame((function(){r(e)})):r(e)},e.onerror=t,e.src=n})):Promise.resolve()},width:function(n){var r=a(n,"width");if(!isNaN(r))return r;r=a(n,"border-left-width");var t=a(n,"border-right-width");return n.scrollWidth+r+t},height:function(n){var r=a(n,"height");if(!isNaN(r))return r;r=a(n,"border-top-width");var t=a(n,"border-bottom-width");return n.scrollHeight+r+t},getWindow:t,isElement:i,isElementHostForOpenShadowRoot:function(n){return i(n)&&null!==n.shadowRoot},isShadowRoot:e,isInShadowRoot:o,isHTMLElement:function(n){return n instanceof t(n).HTMLElement},isHTMLCanvasElement:function(n){return n instanceof t(n).HTMLCanvasElement},isHTMLInputElement:function(n){return n instanceof t(n).HTMLInputElement},isHTMLImageElement:function(n){return n instanceof t(n).HTMLImageElement},isHTMLLinkElement:function(n){return n instanceof t(n).HTMLLinkElement},isHTMLScriptElement:function(n){return n instanceof t(n).HTMLScriptElement},isHTMLStyleElement:function(n){return n instanceof t(n).HTMLStyleElement},isHTMLTextAreaElement:function(n){return n instanceof t(n).HTMLTextAreaElement},isShadowSlotElement:function(n){return o(n)&&n instanceof t(n).HTMLSlotElement},isSVGElement:function(n){return n instanceof t(n).SVGElement},isSVGRectElement:function(n){return n instanceof t(n).SVGRectElement},isDimensionMissing:function(n){return isNaN(n)||n<=0}};function t(n){return((n=n?n.ownerDocument:void 0)?n.defaultView:void 0)||r||window}function e(n){return n instanceof t(n).ShadowRoot}function o(n){return null!==n&&Object.prototype.hasOwnProperty.call(n,"getRootNode")&&e(n.getRootNode())}function i(n){return n instanceof t(n).Element}function a(n,r){if(n.nodeType===l){let t=s(n).getPropertyValue(r);if("px"===t.slice(-2))return t=t.slice(0,-2),parseFloat(t)}return NaN}}(),e=function(){const n=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(n,t,i){return r(n)?Promise.resolve(n).then(e).then((function(r){let e=Promise.resolve(n);return r.forEach((function(n){e=e.then((function(r){return o(r,n,t,i)}))})),e})):Promise.resolve(n)},shouldProcess:r,impl:{readUrls:e,inline:o}};function r(r){return-1!==r.search(n)}function e(r){for(var e,o=[];null!==(e=n.exec(r));)o.push(e[1]);return o.filter((function(n){return!t.isDataUrl(n)}))}function o(n,r,e,o){return Promise.resolve(r).then((function(n){return e?t.resolveUrl(n,e):n})).then(o||t.getAndEncode).then((function(e){return n.replace((o=r,new RegExp(`(url\\(['"]?)(${t.escape(o)})(['"]?\\))`,"g")),`$1${e}$3`);var o}))}}(),o={resolveAll:function(){return i().then((function(n){return Promise.all(n.map((function(n){return n.resolve()})))})).then((function(n){return n.join("\n")}))},impl:{readAll:i}};function i(){return Promise.resolve(t.asArray(document.styleSheets)).then((function(n){const r=[];return n.forEach((function(n){if(Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(n),"cssRules"))try{t.asArray(n.cssRules||[]).forEach(r.push.bind(r))}catch(r){console.error("domtoimage: Error while reading CSS rules from "+n.href,r.toString())}})),r})).then((function(n){return n.filter((function(n){return n.type===CSSRule.FONT_FACE_RULE})).filter((function(n){return e.shouldProcess(n.style.getPropertyValue("src"))}))})).then((function(r){return r.map(n)}));function n(n){return{resolve:function(){var r=(n.parentStyleSheet||{}).href;return e.inlineAll(n.cssText,r)},src:function(){return n.style.getPropertyValue("src")}}}}const a={inlineAll:function n(r){return t.isElement(r)?function(n){const r=["background","background-image"].map((function(r){const t=n.style.getPropertyValue(r),o=n.style.getPropertyPriority(r);return t?e.inlineAll(t).then((function(t){n.style.setProperty(r,t,o)})):Promise.resolve()}));return Promise.all(r).then((function(){return n}))}(r).then((function(){return t.isHTMLImageElement(r)?u(r).inline():Promise.all(t.asArray(r.childNodes).map((function(r){return n(r)})))})):Promise.resolve(r)},impl:{newImage:u}};function u(n){return{inline:function(r){return t.isDataUrl(n.src)?Promise.resolve():Promise.resolve(n.src).then(r||t.getAndEncode).then((function(r){return new Promise((function(t){n.onload=t,n.onerror=t,n.src=r}))}))}}}const c={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,httpTimeout:3e4,styleCaching:"strict"},f={toSvg:v,toPng:function(n,r){return E(n,r).then((function(n){return n.toDataURL()}))},toJpeg:function(n,r){return E(n,r).then((function(n){return n.toDataURL("image/jpeg",(r?r.quality:void 0)||1)}))},toBlob:function(n,r){return E(n,r).then(t.canvasToBlob)},toPixelData:function(n,r){return E(n,r).then((function(r){return r.getContext("2d").getImageData(0,0,t.width(n),t.height(n)).data}))},toCanvas:E,impl:{fontFaces:o,images:a,util:t,inliner:e,urlCache:[],options:{}}},l=(n.exports=f,("undefined"!=typeof Node?Node.ELEMENT_NODE:void 0)||1),s=(void 0!==r?r.getComputedStyle:void 0)||("undefined"!=typeof window?window.getComputedStyle:void 0)||globalThis.getComputedStyle,d=(void 0!==r?r.atob:void 0)||("undefined"!=typeof window?window.atob:void 0)||globalThis.atob;function v(n,r){const e=f.impl.util.getWindow(n);var o=r=r||{};void 0===o.copyDefaultStyles?f.impl.options.copyDefaultStyles=c.copyDefaultStyles:f.impl.options.copyDefaultStyles=o.copyDefaultStyles,void 0===o.imagePlaceholder?f.impl.options.imagePlaceholder=c.imagePlaceholder:f.impl.options.imagePlaceholder=o.imagePlaceholder,void 0===o.cacheBust?f.impl.options.cacheBust=c.cacheBust:f.impl.options.cacheBust=o.cacheBust,void 0===o.useCredentials?f.impl.options.useCredentials=c.useCredentials:f.impl.options.useCredentials=o.useCredentials,void 0===o.httpTimeout?f.impl.options.httpTimeout=c.httpTimeout:f.impl.options.httpTimeout=o.httpTimeout,void 0===o.styleCaching?f.impl.options.styleCaching=c.styleCaching:f.impl.options.styleCaching=o.styleCaching;let i=[];return Promise.resolve(n).then((function(n){if(n.nodeType===l)return n;var r=n,t=n.parentNode,e=document.createElement("span");return t.replaceChild(e,r),e.append(n),i.push({parent:t,child:r,wrapper:e}),e})).then((function(n){return function n(r,e,o,i){const a=e.filter;return r===p||t.isHTMLScriptElement(r)||t.isHTMLStyleElement(r)||t.isHTMLLinkElement(r)||null!==o&&a&&!a(r)?Promise.resolve():Promise.resolve(r).then((function(n){return t.isHTMLCanvasElement(n)?t.makeImage(n.toDataURL()):n.cloneNode(!1)})).then((function(o){return function(r,o){const a=f(o);let u=Promise.resolve();if(0!==a.length){const f=s(c(o));t.asArray(a).forEach((function(t){u=u.then((function(){return n(t,e,f,i).then((function(n){n&&r.appendChild(n)}))}))}))}return u.then((function(){return r}));function c(n){return t.isShadowRoot(n)?n.host:n}function f(n){return t.isShadowSlotElement(n)?n.assignedNodes():n.childNodes}}(o,function(n){return t.isElementHostForOpenShadowRoot(n)?n.shadowRoot:n}(r))})).then((function(n){return function(n,r){return!t.isElement(n)||t.isShadowSlotElement(r)?Promise.resolve(n):Promise.resolve().then(i).then(a).then(u).then(c).then((function(){return n}));function i(){function t(n,r){r.font=n.font,r.fontFamily=n.fontFamily,r.fontFeatureSettings=n.fontFeatureSettings,r.fontKerning=n.fontKerning,r.fontSize=n.fontSize,r.fontStretch=n.fontStretch,r.fontStyle=n.fontStyle,r.fontVariant=n.fontVariant,r.fontVariantCaps=n.fontVariantCaps,r.fontVariantEastAsian=n.fontVariantEastAsian,r.fontVariantLigatures=n.fontVariantLigatures,r.fontVariantNumeric=n.fontVariantNumeric,r.fontVariationSettings=n.fontVariationSettings,r.fontWeight=n.fontWeight}function i(n,r){const i=s(n);i.cssText?(r.style.cssText=i.cssText,t(i,r.style)):(g(e,n,i,o,r),null===o&&(["inset-block","inset-block-start","inset-block-end"].forEach((n=>r.style.removeProperty(n))),["left","right","top","bottom"].forEach((n=>{r.style.getPropertyValue(n)&&r.style.setProperty(n,"0px")}))))}i(r,n)}function a(){const e=t.uid();function o(o){const i=s(r,o),a=i.getPropertyValue("content");if(""!==a&&"none"!==a){const u=n.getAttribute("class")||"",c=(n.setAttribute("class",u+" "+e),document.createElement("style"));function f(){const n=`.${e}:`+o,r=(i.cssText?u:c)();return document.createTextNode(n+`{${r}}`);function u(){return`${i.cssText} content: ${a};`}function c(){return t.asArray(i).map(n).join("; ")+";";function n(n){return n+": "+i.getPropertyValue(n)+(i.getPropertyPriority(n)?" !important":"")}}}c.appendChild(f()),n.appendChild(c)}}[":before",":after"].forEach((function(n){o(n)}))}function u(){t.isHTMLTextAreaElement(r)&&(n.innerHTML=r.value),t.isHTMLInputElement(r)&&n.setAttribute("value",r.value)}function c(){t.isSVGElement(n)&&(n.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.isSVGRectElement(n))&&["width","height"].forEach((function(r){const t=n.getAttribute(r);t&&n.style.setProperty(r,t)}))}}(n,r)}))}(n,r,null,e)})).then(w).then(m).then((function(n){r.bgcolor&&(n.style.backgroundColor=r.bgcolor),r.width&&(n.style.width=r.width+"px"),r.height&&(n.style.height=r.height+"px"),r.style&&Object.keys(r.style).forEach((function(t){n.style[t]=r.style[t]}));let t=null;return"function"==typeof r.onclone&&(t=r.onclone(n)),Promise.resolve(t).then((function(){return n}))})).then((function(n){let e=r.width||t.width(n),o=r.height||t.height(n);return Promise.resolve(n).then((function(n){return n.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(n)})).then(t.escapeXhtml).then((function(n){var r=(t.isDimensionMissing(e)?' width="100%"':` width="${e}"`)+(t.isDimensionMissing(o)?' height="100%"':` height="${o}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(t.isDimensionMissing(e)?"":` width="${e}"`)+(t.isDimensionMissing(o)?"":` height="${o}"`)}><foreignObject${r}>${n}</foreignObject></svg>`})).then((function(n){return"data:image/svg+xml;charset=utf-8,"+n}))})).then((function(n){for(;0<i.length;){var r=i.pop();r.parent.replaceChild(r.child,r.wrapper)}return n})).then((function(n){return f.impl.urlCache=[],p&&(document.body.removeChild(p),p=null),h&&clearTimeout(h),h=setTimeout((()=>{h=null,_={}}),2e4),n}))}function E(n,r){return v(n,r=r||{}).then(t.makeImage).then((function(e){var o="number"!=typeof r.scale?1:r.scale,i=function(n,e){let o=r.width||t.width(n),i=r.height||t.height(n);return t.isDimensionMissing(o)&&(o=t.isDimensionMissing(i)?300:2*i),t.isDimensionMissing(i)&&(i=o/2),(n=document.createElement("canvas")).width=o*e,n.height=i*e,r.bgcolor&&((e=n.getContext("2d")).fillStyle=r.bgcolor,e.fillRect(0,0,n.width,n.height)),n}(n,o),a=i.getContext("2d");return a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,e&&(a.scale(o,o),a.drawImage(e,0,0)),i}))}let p=null;function w(n){return o.resolveAll().then((function(r){var t;return""!==r&&(t=document.createElement("style"),n.appendChild(t),t.appendChild(document.createTextNode(r))),n}))}function m(n){return a.inlineAll(n).then((function(){return n}))}function g(n,r,e,o,i){const a=f.impl.options.copyDefaultStyles?function(n,r){r=function(n){var r=[];do{if(n.nodeType===l){var t=n.tagName;if(r.push(t),b.includes(t))break}}while(n=n.parentNode);return r}(r);var e=function(r){return("relaxed"!==n.styleCaching?r:r.filter(((n,r,t)=>0===r||r===t.length-1))).join(">")}(r);if(_[e])return _[e];var o=function(){if(p)return p.contentWindow;var n=document.characterSet||"UTF-8",r=(r=document.doctype)?(`<!DOCTYPE ${e(r.name)} ${e(r.publicId)} `+e(r.systemId)).trim()+">":"";return(p=document.createElement("iframe")).id="domtoimage-sandbox-"+t.uid(),p.style.visibility="hidden",p.style.position="fixed",document.body.appendChild(p),function(n,r,t,e){try{return n.contentWindow.document.write(r+`<html><head><meta charset='${t}'><title>${e}</title></head><body></body></html>`),n.contentWindow}catch(n){}var o=document.createElement("meta");o.setAttribute("charset",t);try{var i=document.implementation.createHTMLDocument(e),a=(i.head.appendChild(o),r+i.documentElement.outerHTML);return n.setAttribute("srcdoc",a),n.contentWindow}catch(n){}return n.contentDocument.head.appendChild(o),n.contentDocument.title=e,n.contentWindow}(p,r,n,"domtoimage-sandbox");function e(n){var r;return n?((r=document.createElement("div")).innerText=n,r.innerHTML):""}}();r=function(n,r){let t=n.body;do{var e=r.pop();e=n.createElement(e);t.appendChild(e),t=e}while(0<r.length);return t.textContent="​",t}(o.document,r),o=function(n,r){const e={},o=n.getComputedStyle(r);return t.asArray(o).forEach((function(n){e[n]="width"===n||"height"===n?"auto":o.getPropertyValue(n)})),e}(o,r);return function(n){do{var r=n.parentElement;null!==r&&r.removeChild(n),n=r}while(n&&"BODY"!==n.tagName)}(r),_[e]=o}(n,r):{},u=i.style;t.asArray(e).forEach((function(n){var r,t=e.getPropertyValue(n),i=a[n],c=o?o.getPropertyValue(n):void 0;(t!==i||o&&t!==c)&&(i=e.getPropertyPriority(n),c=u,r=0<=["background-clip"].indexOf(n),i?(c.setProperty(n,t,i),r&&c.setProperty("-webkit-"+n,t,i)):(c.setProperty(n,t),r&&c.setProperty("-webkit-"+n,t)))}))}let h=null,_={};const b=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]}(this)}},r={};function t(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={exports:{}};return n[e].call(i.exports,i,i.exports,t),i.exports}t.n=n=>{var r=n&&n.t?()=>n.default:()=>n;return t.d(r,{a:r}),r},t.d=(n,r)=>{for(var e in r)t.o(r,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:r[e]})},t.o=(n,r)=>Object.prototype.hasOwnProperty.call(n,r),(()=>{"use strict";var n,r,e,o,i,a,u,c,f,l,s,d,v,E,p,w,m,g,h,_,b,O,S,L,T,R,A,I,x,C,N,D,y,M,P,G,U,H,k,W,F,z,B,K,V;!function(n){n.CROSSWORD="CROSSWORD",n.QUIZ="QUIZ",n.WORDSEARCH="WORDSEARCH",n.SUDOKU="SUDOKU",n.CODEWORD="CODEWORD",n.KRISSKROSS="KRISSKROSS",n.MINIMETA="MINIMETA",n.MULTI_PUZZLE="MULTI_PUZZLE",n.WORDF="WORDF",n.JIGSAW="JIGSAW",n.WORDROW="WORDROW"}(n||(n={})),function(n){n.NONE="0",n.IFRAME="1",n.WORDPRESS="wp",n.JAVASCRIPT="js"}(r||(r={})),function(n){n.getEmbed=function(r){return r===n.WORDPRESS?n.WORDPRESS:r===n.IFRAME?n.IFRAME:r===n.JAVASCRIPT?n.JAVASCRIPT:n.NONE}}(r||(r={})),function(n){n.RECIRC="recirc",n.SHOW_PREROLL="show_preroll",n.NONE="none"}(e||(e={})),function(n){n.getPrerollParam=function(r){return r===n.RECIRC||"0"==r?n.RECIRC:r===n.SHOW_PREROLL||"1"==r?n.SHOW_PREROLL:r===n.NONE?n.NONE:void 0}}(e||(e={})),function(n){n.NONE="0",n.DATE_PICKER="date-picker",n.WP_PICKER="wp-picker",n.PICKER="picker",n.CALENDAR_PICKER="calendar-picker",n.GROUP_PICKER="group-picker"}(o||(o={})),function(n){n.getPicker=function(r){return r===n.DATE_PICKER?n.DATE_PICKER:r===n.WP_PICKER?n.WP_PICKER:r===n.PICKER?n.PICKER:r===n.CALENDAR_PICKER?n.CALENDAR_PICKER:r===n.GROUP_PICKER?n.GROUP_PICKER:n.NONE}}(o||(o={})),function(n){n.EMAIL="Email",n.NAME="Name",n.MOBILE="Mobile"}(i||(i={})),function(n){n.color="color",n.fontfamily="font-family",n.radiooptions="radio-options",n.mobilekeyboard="mobile-keyboard",n.mediapreview="media-preview",n.imageurl="image-url"}(a||(a={})),function(n){n[n.ENTERED=0]="ENTERED",n[n.STARTED=1]="STARTED",n[n.SOME_FILLED=2]="SOME_FILLED",n[n.ALL_FILLED_SOME_WRONG=3]="ALL_FILLED_SOME_WRONG",n[n.ALL_FILLED_CORRECT=4]="ALL_FILLED_CORRECT",n[n.ROW_LOCKED=5]="ROW_LOCKED"}(u||(u={})),function(n){n[n.UNFILLED=0]="UNFILLED",n[n.FILLED=1]="FILLED",n[n.REVEALED=2]="REVEALED",n[n.CHECKED=3]="CHECKED",n[n.CHECKED_EDITED=4]="CHECKED_EDITED",n[n.PENCIL_FILLED=5]="PENCIL_FILLED",n[n.PRE_REVEALED=6]="PRE_REVEALED"}(c||(c={})),function(n){n.LETTER="letter",n.EMPTY="empty",n.STOP="stop"}(f||(f={})),function(n){n[n.NONE=0]="NONE",n[n.MENU=1]="MENU",n[n.CLUE=2]="CLUE",n[n.BOTH=3]="BOTH"}(l||(l={})),function(n){n[n.NONE=0]="NONE",n[n.FB=1]="FB",n[n.GOOGLE=2]="GOOGLE",n[n.TWITTER=3]="TWITTER",n[n.EMAIL=4]="EMAIL",n[n.MOBILE=5]="MOBILE",n[n.NAME=6]="NAME"}(s||(s={})),function(n){n.INCORRECT="Incorrect Current State",n.SOLE="Sole",n.UNIQUE="Unique",n.INTERSECTION="Intersection",n.LOCKEDSET="Locked Set",n.HIDDENSET="Hidden Set",n.XWING="X-Wing",n.YWING="Y-Wing",n.INNIE_OUTIE="Innie/Outie",n.LASTCAGECELL="Last Cell in Cage",n.COMBINATIONS="Combination Eliminations",n.NORULE="No Rule Available"}(d||(d={})),function(n){n[n.EMPTY=0]="EMPTY",n[n.FOUND=1]="FOUND",n[n.HINT_SHOWN=2]="HINT_SHOWN",n[n.HINT_SHOWN_FOUND=3]="HINT_SHOWN_FOUND",n[n.REVEAL=4]="REVEAL"}(v||(v={})),function(n){n.S="S",n.N="N",n.E="E",n.W="W",n.SE="SE",n.NE="NE",n.NW="NW",n.SW="SW",n.X="X"}(E||(E={})),function(n){n.LETTER_ENTERED="letter_entered",n.REVEAL_GRID="reveal_grid",n.CLEAR_GRID="clear_grid",n.UPDATE_SERVER="update_server",n.UPDATE_OTHER_USER="update_other_user",n.WORD_FOUND="word_found",n.HINT_SHOWN="hint_shown",n.CONTEST_SUBMIT="contest_submit",n.TEST="test",n.WORD_ENTERED="word_entered",n.PIECE_CONNECTED="piece_connected",n.PIECE_MOVED="piece_moved",n.JIGSAW_START_GAME="jigsaw_start_game"}(p||(p={})),function(n){n.CALENDAR="calendar-picker",n.LIST="list-picker"}(w||(w={})),function(n){n.recentlySolved="recentlySolved",n.searchBySetter="searchBySetter",n.calendarList="calendarList"}(m||(m={})),function(n){n[n.SUCCESSFUL=0]="SUCCESSFUL",n[n.ERROR_SAVING_PLAY_STATE=1]="ERROR_SAVING_PLAY_STATE",n[n.ERROR_SAVING_PICKER_STATE=2]="ERROR_SAVING_PICKER_STATE",n[n.ERROR_SAVING_PLAY_STATE_AND_PICKER_STATE=3]="ERROR_SAVING_PLAY_STATE_AND_PICKER_STATE"}(g||(g={})),function(n){n[n.PUZZLE_LOAD=0]="PUZZLE_LOAD",n[n.PUZZLE_SIZE_CHANGE=1]="PUZZLE_SIZE_CHANGE",n[n.PUZZLE_PROGRESS=2]="PUZZLE_PROGRESS",n[n.SOCIAL_PLAY_START=3]="SOCIAL_PLAY_START",n[n.EVENT=4]="EVENT"}(h||(h={})),function(n){n.CLOSE="footer-close",n.CREATE_PUZZLE="create-puzzle-footer-btn",n.ALL_PUZZLES="all-puzzles-footer-btn"}(_||(_={})),function(n){n.ERROR_MODAL="error-modal",n.POST_SUBMISSION_USER_INFO_MODAL="post-submission-user-info",n.START_MESSAGE_MODAL="start-message",n.PUZZLE_COMPLETION_MODAL="puzzle-completion-modal",n.PAUSE_MODAL="pause-modal",n.SOCIAL_PLAY_MODAL="sp-modal",n.HELP_MODAL="help-modal"}(b||(b={})),function(n){n.VERTICAL="vertical",n.HORIZONTAL="horizontal"}(O||(O={})),function(n){n[n.WEB=0]="WEB",n[n.IOS=1]="IOS",n[n.ANDROID=2]="ANDROID",n[n.WEBSIM=3]="WEBSIM"}(S||(S={})),function(n){n.PUZZLE_LOAD_STARTED="ALPM.puzzleLoadStarted",n.PUZZLE_LOADED="ALPM.puzzleLoaded",n.COUNTDOWN_TIME_UP="ALPM.timeUp",n.PUZZLE_COMPLETED="ALPM.puzzleCompleted",n.PUZZLE_RELAYOUT="ALPM.relayout",n.PUZZLE_CLEARED="ALPM.puzzleCleared",n.LETTER_ENTERED="ALPM.letterEntered",n.WORD_SELECTED="ALPM.wordSelected",n.WORD_ENTERED="ALPM.wordEntered",n.WORD_FOUND="ALPM.wordFound"}(L||(L={})),function(n){n.MCQ="MCQ",n.FREEFORM="FREEFORM"}(T||(T={})),function(n){n.ATTEMPTED_UNANSWERED="ATTEMPTED_UNANSWERED",n.ATTEMPTED_EXPIRED="ATTEMPTED_EXPIRED",n.ANSWERED="ANSWERED",n.NOT_ATTEMPTED="NOT_ATTEMPTED"}(R||(R={})),function(n){n.IMAGE="IMAGE",n.AUDIO="AUDIO",n.VIDEO="VIDEO",n.NONE="NONE"}(A||(A={})),function(n){n.NORMAL="normal",n.SIMPLE="simple"}(I||(I={})),function(n){n.SOLUTION_FOUND="solution_found",n.PROCESS_TERMINATED_SOLUTION_LIMIT="process_terminated",n.PROCESS_ENDED="process_ended"}(x||(x={})),function(n){n.TEMPLATE_FOUND="template_found",n.PROCESS_ENDED="process_ended"}(C||(C={})),function(n){n.START_GENERATION="gen_start",n.GET_NEXT_BATCH="get_next_templates"}(N||(N={})),function(n){n[n.PLAIN=0]="PLAIN",n[n.MOUNTAIN=1]="MOUNTAIN",n[n.VALLEY=2]="VALLEY"}(D||(D={})),function(n){n.DEFAULT_FOR_LOCALE="DEFAULT_FOR_LOCALE",n.NONE="NONE"}(y||(y={})),function(n){n.PUZZLE="print-puzzle",n.FILLED="print-filled",n.SOLUTION="print-solution",n.EMPTY_GRID="print-empty-grid-only",n.SOLUTION_GRID_ONLY="print-solution-grid-only",n.CLUES_ANSWERS_ONLY="print-clues-answers-text",n.EMPTY_GRID_SVG="print-empty-grid-svg"}(M||(M={})),function(n){n[n.SHOW_HELP=0]="SHOW_HELP",n[n.APPLY_SETTINGS=1]="APPLY_SETTINGS",n[n.ALL_PUZZLES_FROM_HAMBURGER=2]="ALL_PUZZLES_FROM_HAMBURGER",n[n.PUZZLE_REDIRECT_FROM_END_MODAL=3]="PUZZLE_REDIRECT_FROM_END_MODAL",n[n.END_MODAL_NEXT_ACTION=4]="END_MODAL_NEXT_ACTION",n[n.GAME_COMPLETED_REVEALED=5]="GAME_COMPLETED_REVEALED",n[n.GAME_COMPLETED=6]="GAME_COMPLETED",n[n.PAGE_RESIZE=7]="PAGE_RESIZE",n[n.SHOW_ABOUT=8]="SHOW_ABOUT",n[n.SAVE_GAME=9]="SAVE_GAME",n[n.CLEAR_GAME=10]="CLEAR_GAME",n[n.TOGGLE_FULLSCREEN=11]="TOGGLE_FULLSCREEN",n[n.SHARE_GAME=12]="SHARE_GAME",n[n.COMPLETION_SHARE=13]="COMPLETION_SHARE",n[n.FACEBOOK_SHARE=14]="FACEBOOK_SHARE",n[n.TWITTER_SHARE=15]="TWITTER_SHARE",n[n.COPY_SHARE=16]="COPY_SHARE",n[n.CLICK_TIMER=17]="CLICK_TIMER",n[n.INVITE_SP=18]="INVITE_SP",n[n.SHOW_SP_OPTIONS=19]="SHOW_SP_OPTIONS",n[n.SHOW_GAME_INFO=20]="SHOW_GAME_INFO",n[n.SHOW_PRINT_OPTIONS=21]="SHOW_PRINT_OPTIONS",n[n.HANDLE_PRINT_SELECTION=22]="HANDLE_PRINT_SELECTION",n[n.SUBMIT_IN_CONTEST_MODE=23]="SUBMIT_IN_CONTEST_MODE",n[n.CLICK_EXPLANATION_TEXT=24]="CLICK_EXPLANATION_TEXT",n[n.CLICK_COMPLETION_BUTTON=25]="CLICK_COMPLETION_BUTTON",n[n.CALL_BROWSER_PRINT=26]="CALL_BROWSER_PRINT",n[n.UPDATE_PRINT_FONT_SIZE=27]="UPDATE_PRINT_FONT_SIZE",n[n.REVEAL_LETTER=28]="REVEAL_LETTER",n[n.CHECK_LETTER=29]="CHECK_LETTER",n[n.REVEAL_GRID=30]="REVEAL_GRID",n[n.CHECK_GRID=31]="CHECK_GRID",n[n.REVEAL_WORD=32]="REVEAL_WORD",n[n.CHECK_WORD=33]="CHECK_WORD",n[n.TOGGLE_PENCIL=34]="TOGGLE_PENCIL",n[n.SHOW_HINT=35]="SHOW_HINT",n[n.ENTER_REBUS=36]="ENTER_REBUS",n[n.SHOW_CLUELIST=37]="SHOW_CLUELIST",n[n.DOT_TOGGLE=38]="DOT_TOGGLE",n[n.SPACE_TOGGLE=39]="SPACE_TOGGLE",n[n.CLUE_BAR_TOGGLE=40]="CLUE_BAR_TOGGLE",n[n.CLUE_HEADER_CLICK=41]="CLUE_HEADER_CLICK",n[n.OSK_PEN_MODE=42]="OSK_PEN_MODE",n[n.OSK_PENCIL_MODE=43]="OSK_PENCIL_MODE",n[n.PEN_MODE=44]="PEN_MODE",n[n.PENCIL_MODE=45]="PENCIL_MODE",n[n.SHOW_ALL_CANDIDATES=46]="SHOW_ALL_CANDIDATES",n[n.SHOW_CANDIDATES_IN_BOX=47]="SHOW_CANDIDATES_IN_BOX",n[n.SHOW_SMARTHINT=48]="SHOW_SMARTHINT",n[n.UNDO=49]="UNDO",n[n.REDO=50]="REDO",n[n.SHOW_HELP_VIA_SCORE=51]="SHOW_HELP_VIA_SCORE",n[n.START_SELECTION=52]="START_SELECTION",n[n.END_SELECTION=53]="END_SELECTION",n[n.SERIES_PICKER_BACK=54]="SERIES_PICKER_BACK",n[n.TOGGLE_REFERENCE_IMAGE=55]="TOGGLE_REFERENCE_IMAGE",n[n.TOGGLE_EDGES_ONLY=56]="TOGGLE_EDGES_ONLY",n[n.CHANGE_BG_COLOR=57]="CHANGE_BG_COLOR"}(P||(P={})),function(n){n[n.EDIT_CLUES=0]="EDIT_CLUES",n[n.AUTO_FILL_CLUES=1]="AUTO_FILL_CLUES",n[n.SAVE_CLUE=2]="SAVE_CLUE",n[n.SAVE_GAME=3]="SAVE_GAME",n[n.EDIT_WORD_LENGTHS=4]="EDIT_WORD_LENGTHS",n[n.SAVE_WORD_LENGTHS=5]="SAVE_WORD_LENGTHS",n[n.ONE_WAY_LINK_CLUES=6]="ONE_WAY_LINK_CLUES",n[n.TWO_WAY_LINK_CLUES=7]="TWO_WAY_LINK_CLUES",n[n.AUTOLINK_CLUES=8]="AUTOLINK_CLUES",n[n.UNLINK_CLUES=9]="UNLINK_CLUES",n[n.LINK_CLUES_BY_GROUP=10]="LINK_CLUES_BY_GROUP",n[n.SAVE_GROUP=11]="SAVE_GROUP",n[n.START_GRID_EDITING=12]="START_GRID_EDITING",n[n.START_REBUS_GRID_EDITING=13]="START_REBUS_GRID_EDITING",n[n.MARK_CIRCLES=14]="MARK_CIRCLES",n[n.MARK_RIGHT_WALL=15]="MARK_RIGHT_WALL",n[n.MARK_BOTTOM_WALL=16]="MARK_BOTTOM_WALL",n[n.MARK_BGCOLOR=17]="MARK_BGCOLOR",n[n.MARK_FGCOLOR=18]="MARK_FGCOLOR",n[n.MARK_VOID=19]="MARK_VOID",n[n.MAKE_EMPTY_CELLS_VOID=20]="MAKE_EMPTY_CELLS_VOID",n[n.MAKE_EMPTY_CELLS_NON_VOID=21]="MAKE_EMPTY_CELLS_NON_VOID",n[n.MARK_PREREVEALED=22]="MARK_PREREVEALED",n[n.SAVE_GRID=23]="SAVE_GRID",n[n.IMAGE_IN_GRID=24]="IMAGE_IN_GRID",n[n.IMAGE_IN_GRID_SAVE=25]="IMAGE_IN_GRID_SAVE",n[n.TRANSPOSE_GRID=26]="TRANSPOSE_GRID",n[n.ADD_DEL_ROW=27]="ADD_DEL_ROW",n[n.ADD_DEL_COL=28]="ADD_DEL_COL",n[n.EDIT_GAME=29]="EDIT_GAME",n[n.EDITOR_TO_LOGIN_PAGE=30]="EDITOR_TO_LOGIN_PAGE",n[n.EDITOR_TO_PUBLISH_PAGE=31]="EDITOR_TO_PUBLISH_PAGE",n[n.EDITOR_TO_DASHBOARD=32]="EDITOR_TO_DASHBOARD",n[n.TOGGLE_MAGICFILL=33]="TOGGLE_MAGICFILL",n[n.START_MAGICFILL=34]="START_MAGICFILL",n[n.STOP_MAGICFILL=35]="STOP_MAGICFILL",n[n.SUGGEST_PLACEMENTS_OPEN=36]="SUGGEST_PLACEMENTS_OPEN",n[n.SUGGEST_PLACEMENTS_OK=37]="SUGGEST_PLACEMENTS_OK"}(G||(G={})),function(n){n[n.MEDIA_BUTTON_CLICK=0]="MEDIA_BUTTON_CLICK",n[n.PLAY_AUDIO=1]="PLAY_AUDIO",n[n.PLAY_VIDEO=2]="PLAY_VIDEO",n[n.PLAY_YOUTUBE=3]="PLAY_YOUTUBE",n[n.SHOW_IMAGE=4]="SHOW_IMAGE"}(U||(U={})),function(n){n[n.UNFILLED_INCORRECT=0]="UNFILLED_INCORRECT",n[n.UNFILLED_CORRECT=1]="UNFILLED_CORRECT",n[n.FILLED_INCORRECT=2]="FILLED_INCORRECT",n[n.FILLED_CORRECT=3]="FILLED_CORRECT"}(H||(H={})),function(n){n.UPPERCASE="uppercase",n.SENTENCE_CASE="sentenceCase"}(k||(k={})),function(n){n.NEVER="never",n.IF_HAS_TITLE_OR_CONTENT="ifHasTitleOrContent",n.IF_HAS_CONTENT="ifHasContent"}(W||(W={})),function(n){n.main="puzzle-create",n.upload="puzzle-upload",n.crossword="crossword-create",n.sudoku="sudoku-create",n.wordsearch="wordsearch-create",n.wordf="wordf-create",n.quiz="quiz-create",n.jigsaw="jigsaw-create",n.wordrow="wordrow-create",n.krisskross="krisskross-create",n.wordoku="wordoku-create",n.picdoku="picdoku-create",n.codeword="codeword-create"}(F||(F={})),function(n){n[n.LETTER_PRESENT_POSITION_CORRECT=0]="LETTER_PRESENT_POSITION_CORRECT",n[n.LETTER_PRESENT_POSITION_INCORRECT=1]="LETTER_PRESENT_POSITION_INCORRECT",n[n.LETTER_ABSENT=2]="LETTER_ABSENT"}(z||(z={})),function(n){n.DISMISSABLE="dismissable",n.NOT_BG_DISMISSABLE="notBgDismissable",n.NOT_DISMISSABLE="notDismissable"}(B||(B={})),function(n){n.NONE="none",n.DEFAULT_MOBILE="https://amuselabs.com/wp-content/uploads/2024/01/End-Modal-Basic-Mobile.png",n.DEFAULT_DESKTOP="https://amuselabs.com/wp-content/uploads/2024/01/End-Modal-Basic-Desktop.png"}(K||(K={}));var j=!1;function Y(n,r){for(var t,e=n.replace(/[^A-Za-z0-9\+\/]/g,""),o=e.length,i=r?Math.ceil((3*o+1>>2)/r)*r:3*o+1>>2,a=new Uint8Array(i),u=void 0,c=void 0,f=0,l=0,s=0;s<o;s++)if(c=3&s,f|=((t=e.charCodeAt(s))>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:43===t?62:47===t?63:0)<<18-6*c,3===c||o-s==1){for(u=0;u<3&&l<i;u++,l++)a[l]=f>>>(16>>>u&24)&255;f=0}return a}function Z(n){return n<26?n+65:n<52?n+71:n<62?n-4:62===n?43:63===n?47:65}function X(n){for(var r="",t=void 0,e=n.length,o=0;o<e;o++)t=n[o],String.fromCodePoint||function(n){var r=function(){for(var r=[],t=0,e="",o=0,i=arguments.length;o!==i;++o){var a=+arguments[o];if(!(a<1114111&&a>>>0===a))throw RangeError("Invalid code point: "+a);a<=65535?t=r.push(a):(a-=65536,t=r.push(55296+(a>>10),a%1024+56320)),t>=16383&&(e+=n.apply(null,r),r.length=0)}return e+n.apply(null,r)};try{Object.defineProperty(String,"fromCodePoint",{value:r,configurable:!0,writable:!0})}catch(n){String.fromCodePoint=r}}(String.fromCharCode),r+=String.fromCodePoint(t>251&&t<254&&o+5<e?1073741824*(t-252)+(n[++o]-128<<24)+(n[++o]-128<<18)+(n[++o]-128<<12)+(n[++o]-128<<6)+n[++o]-128:t>247&&t<252&&o+4<e?(t-248<<24)+(n[++o]-128<<18)+(n[++o]-128<<12)+(n[++o]-128<<6)+n[++o]-128:t>239&&t<248&&o+3<e?(t-240<<18)+(n[++o]-128<<12)+(n[++o]-128<<6)+n[++o]-128:t>223&&t<240&&o+2<e?(t-224<<12)+(n[++o]-128<<6)+n[++o]-128:t>191&&t<224&&o+1<e?(t-192<<6)+n[++o]-128:t);return r}var J=function(){return{}},q=!1,Q=["scroll_if_invisible along x","scroll_if_invisible along y"],nn=[];function rn(n,r,t,e){null==n&&(n="NULL log message");var o={message:(n=function(n){if(n&&J){var r=J();if(r)for(var t in r)r.hasOwnProperty(t)&&(n+=" "+t+": "+r[t])}return n}(n)).toString()};r&&(o.warn=!0),$.post("log",o),t&&(n+=" errorStack: "+(new Error).stack),e&&(n+=" exceptionStack: "+e.stack),"undefined"!=typeof console&&(r?console.warn(n):console.log(n))}function tn(n){q&&rn("DEBUG "+n,!1)}function en(n,r){for(var t=0;t<Q.length;t++)if(-1!=n.indexOf(Q[t])){if(-1!=nn.indexOf(Q[t]))return;nn.push(Q[t])}rn(n,!0,r)}var on,an;!function(n){n.CSRF_TOKEN_HEADER="X-CSRF-TOKEN"}(on||(on={})),function(n){n.CSRF_TOKEN="X-CSRF-TOKEN",n.SRC="src"}(an||(an={}));function un(){var n,r="undefined"!=typeof window?window.location.search:"",t=new URLSearchParams(r);return n={},t.forEach((function(r,t){n[t]=r})),n}var cn=function(){try{return window.self!==window.top}catch(n){return!0}};function fn(){try{return document.createEvent("TouchEvent"),!0}catch(n){return!1}}String.prototype.endsWith=function(n){return-1!==this.indexOf(n,this.length-n.length)};function ln(n){return/[\u0900-\u0dff]/.test(n)}function sn(n){function r(n){return(n=n.toLowerCase()).length>4&&(n.lastIndexOf(".jpg")===n.length-4||n.lastIndexOf(".png")===n.length-4||n.lastIndexOf(".jpeg")===n.length-5||n.lastIndexOf(".svg")===n.length-4||n.lastIndexOf(".gif")===n.length-4)}if(r(n))return!0;var t=n.indexOf("?");if(t>=0&&r(n.substring(0,t)))return!0;return!1}function dn(n){return!(!n||!(n.indexOf("youtube.com")>=0||n.indexOf("youtu.be")>=0))}function vn(n){return!!n&&(n.endsWith(".mp3")||n.endsWith(".ogg")||n.endsWith(".m4a")||n.endsWith(".wav")||n.endsWith(".wma"))}function En(n){return dn(n)||function(n){if(n.endsWith("mp4"))return!0;var r=n.indexOf("#");return!!(r>0&&n.substring(0,r).endsWith("mp4"))}(n)||function(n){return n.indexOf("vimeo.com/")>=0&&n.indexOf("video/")>=0}(n)}function pn(n,r,t){return(n-r)*(n-t)<=0}function wn(n,r){return Math.random()*(r-n)+n}function mn(n,r,t){var e={height:"innerHeight"in window?window.innerHeight:document.documentElement.offsetHeight,width:"innerWidth"in window?window.innerWidth:document.documentElement.offsetWidth};return tn("VIEWPORT screen.width:"+screen.width+" screen.height:"+screen.height+" vp.width: "+e.width+" vp.height: "+e.height+" document.clientHeight:"+document.documentElement.clientHeight+" document.clientWidth:"+document.documentElement.clientWidth),(window.puzzleEnv.runningOnTablet||window.puzzleEnv.runningOnMobile)&&(e.height=document.documentElement.clientHeight,e.width=document.documentElement.clientWidth),window.puzzleEnv.jsInjection?(e.height=t.height(),e.width=t.width(),e):(tn("FINAL vp.width:"+e.width+" vp.height:"+e.height),cn()&&(window.puzzleEnv.runningOnMobile?n&&(e.height=window.screen.availHeight):(e.height=r?window.screen.availHeight:Math.min(window.screen.availHeight,e.height),e.height=Math.min(e.height,window.screen.availHeight-70)),(window.puzzleEnv.runningOnTablet||window.puzzleEnv.runningOnMobile)&&(e.height=r?screen.height-48:Math.min(screen.height-48,e.height))),window.puzzleEnv.runningOnMobile&&n&&(e.height-=n),e)}function gn(n){return!n||0===n.length}var hn=" ",_n="\0",bn="{",On="}",Sn="-",Ln={E:0,SE:45,S:90,SW:135,W:180,NW:225,N:270,NE:315};function Tn(r){return r.puzzleType===n.CROSSWORD}function Rn(r){return r.puzzleType===n.CODEWORD}function An(r){return r.puzzleType===n.KRISSKROSS}function In(r){return r.puzzleType===n.SUDOKU}function xn(r){return r.puzzleType===n.QUIZ}function Cn(r){return r.puzzleType===n.WORDSEARCH}function Nn(r){return r.puzzleType===n.WORDROW}function Dn(r){return r.puzzleType===n.MINIMETA&&r.hasOwnProperty("metaPhrase")}function yn(n){return Cn(n)||Dn(n)}function Mn(n,r,t,e){return!r&&n[t][e]===Sn}function Pn(n){return n.nBoxes?n.nBoxes:n.word?n.word.length:0}function Gn(n){if(!n)return[];if(n.boxesForWord)return n.boxesForWord;for(var r=[],t=n.x,e=n.y,o=nr(n.direction?n.direction:n.acrossNotDown?E.E:E.S),i=0;i<Pn(n);i++)r.push({x:t,y:e}),t+=o.xIncr,e+=o.yIncr;return r}function Un(n){return n.startsWith(bn)&&n.endsWith(On)?n.substring(1,n.length-1):n}function Hn(n){var r,t={};return r=function(n,r){var t=function(n){n=function(n){return n=(n=n.replace(/{}/,"")).replace(/{[^}]}/,(function(n){return Un(n)})),n}(n);for(var t=/{[^}]*}/,e="";;){var o=n.match(t);if(null==o)break;var i=o.index,a=o[0];if(n=n.substring(0,i)+e+n.substring(i+a.length),r[e]=Un(a),(e=String.fromCharCode(e.charCodeAt(0)+1))>"")return n}return n}(n);return t.replace(/\s/g,"")}(n,t),r.split("").map((function(n){return n in t?t[n]:n}))}function kn(n){var r=function(n){return n.wordLens?n.wordLens:[Pn(n)]}(n);return"("+r.join(",")+")"}function Wn(n,r,t,e,o){if(e[n][r].css(t),o&&o[n][r])for(var i=0;i<o[n][r].length;i++)o[n][r][i]&&o[n][r][i].css(t)}var Fn=function(){},$n=function(){};!function(){function n(){this._answer="",this._timetaken=0,this._answerState=R.ATTEMPTED_UNANSWERED}Object.defineProperty(n.prototype,"answer",{get:function(){return this._answer},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timetaken",{get:function(){return this._timetaken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"answerState",{get:function(){return this._answerState},enumerable:!1,configurable:!0}),n.prototype.setTimeTaken=function(n){this._timetaken=n},n.prototype.setAnswer=function(n){this._answer=n,this._answerState=R.ANSWERED},n.prototype.setAnswerAndTimeTaken=function(n,r,t){this._answer=n.trim(),""===n.trim()?this._answerState=R.ATTEMPTED_UNANSWERED:this._answerState=R.ANSWERED,this._timetaken=r.length>0?parseInt(r):0,t&&""===n.trim()&&(this.timetaken>t?this._answerState=R.ATTEMPTED_EXPIRED:this._answerState=R.ATTEMPTED_UNANSWERED)}}();var zn=function(n,r){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var e,o,i=t.call(n),a=[];try{for(;(void 0===r||r-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(n){o={error:n}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},Bn=function(n,r,t){if(t||2===arguments.length)for(var e,o=0,i=r.length;o<i;o++)!e&&o in r||(e||(e=Array.prototype.slice.call(r,0,o)),e[o]=r[o]);return n.concat(e||Array.prototype.slice.call(r))},Kn={TEMP_HIGHLIGHT_MARK:"temp-hilite-mark",HIGHLIGHT_MARK:"hilite-mark",SELECTED_WORD_DISPLAY:"selected-word-display",WS_HINT:"wordsearch-hint",CLUE_DIV:"clueDiv",CLUES_AREA:"clues-area",CLUES_AREA_SCROLL_INDICATOR:"clues-area-scroll-indicator",WS_SELECTED_CLUE:"wordsearch-selected-clue",N_WORDS_FOUND_WITHOUT_HELP:"n-words-found-without-help",WS_WORD_OR_WORDS:"wordsearch-word-or-words",N_TOTAL_WORDS:"n-total-words",PERCENTAGE_FOUND_WITHOUT_HELP:"percentage-found-without-help",CONGRATULATORY_WORD:"congratulatory-word",NAV_SCORE:"nav-score",HINT_BOX:"hint-box",GRID_AREA:"grid-area",KRAZY_GRID_AREA:"krazy-grid-area",FOUND_WORD:"found-word",SCORE_VALUE:"score-value",CORRECT_HIGHLIGHT:"correct-highlight",BOX:"box",LETTER_IN_BOX:"letter-in-box",CROSSWORD:"crossword",CROSSWORD_FOOTER_MESSAGE:"crossword-footer-message",CLUES_SCROLL:"clues-scroll",MEDIA_CLUE:"media-clue"},Vn={INPUT_DUMMY:"input.dummy"};function jn(n,r,t,e,o){if(n===t&&r<e)return E.S;if(n===t&&r>=e)return E.N;if(o){if(n<t&&r===e)return E.W;if(n>t&&r===e)return E.E;if(n<t&&r<e)return E.SW;if(n<t&&r>e)return E.NW;if(n>t&&r>e)return E.NE;if(n>t&&r<e)return E.SE}return n<t&&r===e?E.E:n>t&&r===e?E.W:n<t&&r<e?E.SE:n<t&&r>e?E.NE:n>t&&r>e?E.NW:n>t&&r<e?E.SW:n===t&&r===e?E.N:E.X}function Yn(n,r,t,e,o,i,a){function u(n,r,t,e,o,i,a){var u,c,f,l,s,d,v,E={rotate:0,translateX:0,translateY:0,width:0,height:0,transformOrigin:15},p=null!==(u=$(Vn.BOX,n).outerWidth())&&void 0!==u?u:0,w=Math.sqrt(2*p*p),m=(s=e,v=i,(d=o)-(l=t)==0||v-s==0?Math.max(Math.abs(d-l)+1,Math.abs(v-s)+1):Math.min(Math.abs(d-l)+1,Math.abs(v-s)+1)),g=null!==(c=r[t][e].offset())&&void 0!==c?c:{left:0,top:0},h=null!==(f=$(Vn.CROSSWORD,n).offset())&&void 0!==f?f:{left:0,top:0},_=g.left-h.left,b=g.top-h.top;E.translateX=_,E.translateY=b,E.transformOrigin=p/2,E.height=p;var O=jn(t,e,o,i,a);return E.rotate=Ln[O],E.width="NE"===O||"NW"===O||"SE"===O||"SW"===O?m*w-(w-p):m*p,E}if(t&&!(t.length<1))for(var c=0;c<t.length;c++){var f=t[c].x,l=t[c].y,s=void 0,d=void 0;1===t.length?(s=t[c].x,d=t[c].y):(s=t[c+1].x,d=t[c+1].y);var v=u(n,r,f,l,s,d,a),E=$('<div class="'+Kn.HIGHLIGHT_MARK+'"></div>');if(o&&E.addClass(o),i)for(var p in i)E.attr(p,i[p]);if(e&&e.length>0&&E.css("background-color",e),E.css({width:v.width+"px",height:v.height+"px","transform-origin":v.transformOrigin,transform:"translate("+v.translateX+"px, "+v.translateY+"px) rotate("+v.rotate+"deg)"}),$(Vn.CROSSWORD,n).prepend(E),c===t.length-2)break}}function Zn(n,r,t,e,o,i,a,u){$(Vn.HIGHLIGHT_MARK+":not("+Vn.TEMP_HIGHLIGHT_MARK+')[data-wordnum="'+e+'"]',r).remove(),a&&($(Vn.TEMP_HIGHLIGHT_MARK,r).remove(),i["data-wordnum"]=e.toString(),Yn(r,t,n,o,null,i,u));var c=function(n,r){return $(Vn.CLUE_DIV+"[data-wordnum="+r+"]",n)}(r,e);c.addClass(Kn.FOUND_WORD);for(var f=n.length<2?n:function(n,r,t,e,o){var i=[],a=jn(n,r,t,e,o),u=nr(a);o&&(u.xIncr=-u.xIncr);var c=n,f=r;for(;pn(c,n,t)&&pn(f,r,e);){var l={x:c,y:f};i.push(l),c+=u.xIncr,f+=u.yIncr}return i}(n[0].x,n[0].y,n[n.length-1].x,n[n.length-1].y,u),l=0;l<f.length;l++)$(Vn.LETTER_IN_BOX,t[f[l].x][f[l].y]).css("transform","")}function Xn(n,r){try{if((r.x||0===r.x)&&(r.y||0===r.y)){var t=void 0;if(r.acrossNotDown){n:for(var e=0;e<n.boxToPlacedWordsIdxs.length;e++)if(null!==n.boxToPlacedWordsIdxs[e][r.y]&&void 0!==n.boxToPlacedWordsIdxs[e][r.y])for(var o=0;o<n.boxToPlacedWordsIdxs[e][r.y].length;o++){if(((i=n.boxToPlacedWordsIdxs[e][r.y][o])||0===i)&&n.placedWords[i].acrossNotDown){t=n.placedWords[i];break n}}}else n:for(e=0;e<n.boxToPlacedWordsIdxs[r.x].length;e++)if(null!==n.boxToPlacedWordsIdxs[r.x][e]&&void 0!==n.boxToPlacedWordsIdxs[r.x][e])for(o=0;o<n.boxToPlacedWordsIdxs[r.x][e].length;o++){var i;if(((i=n.boxToPlacedWordsIdxs[r.x][e][o])||0===i)&&!n.placedWords[i].acrossNotDown){t=n.placedWords[i];break n}}return t&&r.x===t.x&&r.y===t.y&&r.acrossNotDown===t.acrossNotDown?r.acrossNotDown?r.y:r.x:"•"}}catch(t){en("Exception in getting the clue number for word: "+r.word+" in puzzle: "+n.id+", error: "+t+", Stacktrace: "+t.stack)}}function Jn(n){for(var r=[],t=[],e=[],o=0;o<n.w;o++){r[o]=(o+1).toString(),t[o]=!0;var i={x:o,y:0,isVoid:!0};e.push(i)}var a=[];a.push(r);var u=[];u.push(t),function(n,r,t,e,o){var i=n,a=r.length;n.preRevealIdxs||er(n);for(var u=0;u<i.box.length;u++)for(var c=0;c<a;c++)n.clueNums[u].unshift("0"),n.boxToPlacedWordsIdxs[u].unshift(null),n.box[u].unshift(r[c][u]),n.preRevealIdxs[u].unshift(t[c][u]);if(n.cellInfos){for(u=0;u<n.cellInfos.length;u++)n.cellInfos[u].y+=a;n.cellInfos=n.cellInfos.concat(e)}else n.cellInfos=e;if(n.imagesInGrid)for(u=0;u<n.imagesInGrid.length;u++)n.imagesInGrid[u].startY+=a,n.imagesInGrid[u].endY+=a;for(u=0;u<n.placedWords.length;u++)n.placedWords[u].y+=a;n.h=n.h+a}(n,a,u,e);var c=[];t=[],e=[];for(o=0;o<n.h;o++){c[o]=o.toString(),t[o]=!0;var f={x:0,y:o,isVoid:!0,fgColor:"#000000"};0===o&&(f.fgColor="transparent"),e.push(f)}var l=[];return l.push(c),(u=[]).push(t),function(n,r,t,e,o){var i=r.length;n.preRevealIdxs||er(n);for(var a=[],u=[],c=0;c<n.h;c++)a[c]="0",u[c]=null;for(var f=0;f<i;f++)n.clueNums.unshift(a),n.boxToPlacedWordsIdxs.unshift(u),n.box.unshift(r[f]),n.preRevealIdxs.unshift(t[f]);if(n.cellInfos){for(c=0;c<n.cellInfos.length;c++)n.cellInfos[c].x+=i;n.cellInfos=n.cellInfos.concat(e)}else n.cellInfos=e;if(n.imagesInGrid)for(c=0;c<n.imagesInGrid.length;c++)n.imagesInGrid[c].startX+=i,n.imagesInGrid[c].endX+=i;for(c=0;c<n.placedWords.length;c++)n.placedWords[c].x+=i;n.w=n.w+i}(n,l,u,e),n.completionPuzzle&&(n.completionPuzzle=Jn(n.completionPuzzle)),function(n){for(var r=[],t=[],e=0;e<n.placedWords.length;e++){var o=n.placedWords[e];o.acrossNotDown?r.push(o):t.push(o)}n.placedWords=r.concat(t.sort((function(n,r){return n.x&&r.x&&n.y&&r.y?n.x!==r.x?n.x-r.x:n.y-r.y:0})))}(n),function(n){function r(r,t){var e,o=r.acrossNotDown?1:0,i=r.acrossNotDown?0:1,a=r.x,u=r.y;if(r.nBoxes&&(a||0===a)&&(u||0===u))for(var c=0;c<r.nBoxes;c++,a+=o,u+=i){var f=null!==(e=n.boxToPlacedWordsIdxs[a][u])&&void 0!==e?e:[],l=!1;if(0===f.length)f=n.boxToPlacedWordsIdxs[a][u]=[];else{var s=n.placedWords[f[0]],d=s.x===a&&s.y===u;r.x===a&&r.y===u&&!d&&(l=!0)}l?f.unshift(t):f.push(t)}}n.boxToPlacedWordsIdxs=[];for(var t=0;t<n.w;t++)n.boxToPlacedWordsIdxs[t]=[];for(var e=0;e<n.placedWords.length;e++){var o=n.placedWords[e],i=o.direction&&(o.direction==E.NW||o.direction==E.NE||o.direction==E.SE||o.direction==E.SW);(o.boxesForWord||i)&&en("recomputeBoxToPlacedWordIdxs called for a word that may not be across or down"+JSON.stringify(o)),r(o,e)}}(n),n}!function(n,r){for(var t=Object.keys(n),e=0;e<t.length;e++)r[t[e]]="."+n[t[e]]}(Kn,Vn);function qn(){return $(".grid-area").hasClass("svg-display")}function Qn(n){if(!n)return!1;for(var r=0;r<n.length;r++)for(var t=0;t<n[r].length;t++)if(n[r]&&n[r][t]&&ln(n[r][t]))return!0}function nr(n){return{xIncr:n===E.N||n===E.S?0:n===E.E||n===E.SE||n===E.NE?1:n===E.W||n===E.SW||n===E.NW?-1:void en("Unknown direction: "+n),yIncr:n===E.E||n===E.W?0:n===E.N||n===E.NE||n===E.NW?-1:n===E.S||n===E.SE||n===E.SW?1:void en("Unknown direction: "+n)}}function rr(n,r){var t="";if(n.hasOwnProperty("question"))gn(n.explanation)||void 0===n.explanation||(t+=n.explanation);else if(n.clue.url&&"#"!==n.clue.url){var e=n.clue.refText&&n.clue.refText.length>0?r+": "+n.clue.refText:r;t='<a target="_blank" href="'+n.clue.url+'">'+e+"</a>"}else n.clue.refText&&n.clue.refText.length>0&&(t+=n.clue.refText);return t.length>0?'<div class="explanation-text">'+t+"</div>":t}function tr(n,r){return n.word&&r.word?n.word.localeCompare(r.word):0}function er(n){n.preRevealIdxs=[];for(var r=0;r<n.box.length;r++){n.preRevealIdxs[r]=[];for(var t=0;t<n.box[r].length;t++)n.preRevealIdxs[r][t]=!1}}fn(),fn();function or(r){if(null!=r){if(r.puzzleType===n.MULTI_PUZZLE&&(r.puzzleType=n.CROSSWORD),xn(r)?((!r.questions||0===r.questions.length&&r.placedWords&&r.placedWords.length>0)&&function(n){for(var r=[],t=0;t<n.placedWords.length;t++){var e=n.placedWords[t],o=new Fn;if(o.questionType=T.MCQ,o.qid=t,o.explanation=e.clue.refText?e.clue.refText:"",o.question=e.clue.clue?e.clue.clue:"",o.hint=e.clue.hint?e.clue.hint:"",o.URLs=e.clue.URLs?e.clue.URLs:[],o.media=e.clue.media?e.clue.media:[],o.credits=e.clue.credits?e.clue.credits:"",e.clue.audioURL&&e.clue.audioURL.length>0){o.URLs||(o.URLs=[]),o.media||(o.media=[]);var i={};i.URL=e.clue.audioURL,i.mediaType=A.AUDIO,o.media.push(i),o.URLs.push(e.clue.audioURL)}o.options=[];for(var a=0;a<e.answerOptions.length;a++){var u=new $n;u.option=e.answerOptions[a],o.options.push(u)}var c=new $n;c.option=e.word,o.options.push(c);for(var f=-1,l=0;l<o.options.length;l++)if(o.options[l].option===e.word){f=l;break}o.correctAnswer=f.toString(),r.push(o)}n.questions=r}(r),function(n){var r=n;if(r.questions)for(var t=function(t){var e=r.questions[t],o=[];if(e.URLs&&e.URLs.length>0&&(e.URLs.map((function(r){var t={};t.URL=r,sn(r)?t.mediaType=A.IMAGE:vn(r)?t.mediaType=A.AUDIO:En(r)?t.mediaType=A.VIDEO:t.mediaType=A.NONE,t.mediaType==A.NONE&&en("In quiz id = ".concat(n.id,", url = ").concat(r," was found with media type NONE. Please check why backend was not able to detect the media type for this URL!!")),o.push(t)})),e.media=o),e.audioURL&&e.audioURL.length>0){var i={};i.URL=e.audioURL,i.mediaType=A.AUDIO,e.media?e.media.push(i):e.media=[i]}},e=0;e<r.questions.length;e++)t(e)}(r)):function(n){n.placedWords&&n.placedWords.forEach((function(n){if(n.clue&&n.clue.media&&n.clue.media.length>0);else{var r=[];n.clue&&n.clue.URLs&&n.clue.URLs.length>0&&n.clue.URLs.map((function(n){var t={};t.URL=n,sn(n)?t.mediaType=A.IMAGE:vn(n)?t.mediaType=A.AUDIO:En(n)?t.mediaType=A.VIDEO:t.mediaType=A.NONE,r.push(t)})),n.clue.media=r}if(n.clue&&n.clue.audioURL&&n.clue.audioURL.length>0){var t={};t.URL=n.clue.audioURL,t.mediaType=A.AUDIO,n.clue.media?n.clue.media.push(t):n.clue.media=[t]}}))}(r),Cn(r)&&function(n){for(var r,t,e=function(){for(var r=new Set,t=0;t<n.placedWords.length;t++)Hn(n.placedWords[t].originalTerm).forEach((function(n){r.add(n)}));return r}(),o=0;o<n.w;o++)for(var i=0;i<n.h;i++){var a=void 0;n.box[o][i]===_n||Mn(n.box,n.isImported,o,i)?(r=e,t=void 0,t=Math.floor(Math.random()*r.size),a=Bn([],zn(r),!1)[t]):a=n.box[o][i],n.box[o][i]=a}}(r),r.clueNums&&r.clueNums[0]&&"number"==typeof r.clueNums[0][0])for(var t=0;t<r.clueNums.length;t++)for(var e=0;e<r.clueNums[t].length;e++)r.clueNums[t][e]=r.clueNums[t][e].toString();if(r.placedWords&&r.placedWords[0]&&"number"==typeof r.placedWords[0].clueNum)for(t=0;t<r.placedWords.length;t++)r.placedWords[t].clueNum=r.placedWords[t].clueNum.toString();return r}}function ir(n,r){function t(n){return n.hasOwnProperty("redirectSpuriousLoadToURL")}if(null!=n){if(Tn(n)){var e=t(r)?function(n,r){return Tn(r)}(0,n)&&r.useChessView:r.useChessView;e&&(n=Jn(n))}return Nn(n)&&t(r)&&function(n,r){return Nn(r)}(0,n)&&(n=function(n,r){var t=function(n){for(var r="",t=0;t<n.placedWords.length;t++)r+=n.placedWords[t].word.trim()+" ";return r.trim()}(n);n.w=t.length,n.h=r,n.box=[];for(var e=0;e<n.w;e++){n.box[e]=[];for(var o=0;o<n.h;o++)n.box[e][o]=""}return n}(n,r.attemptsAvailable)),n.cellInfos&&(n=function(n){for(var r={},t=0;t<n.cellInfos.length;t++){var e=n.cellInfos[t],o=e.x,i=e.y,a=o*n.h+i;if(a in r){var u=r[a];e.fgColor&&(u.fgColor=e.fgColor),e.bgColor&&(u.bgColor=e.bgColor),e.isCircled&&(u.isCircled=e.isCircled),e.bottomWall&&(u.bottomWall=e.bottomWall),e.rightWall&&(u.rightWall=e.rightWall),e.isVoid&&(u.isVoid=e.isVoid),e.displayRightWallShort&&(u.displayRightWallShort=e.displayRightWallShort),e.displayBottomWallShort&&(u.displayBottomWallShort=e.displayBottomWallShort),e.rightWallShortAlign&&(u.rightWallShortAlign=e.rightWallShortAlign),e.bottomWallShortAlign&&(u.bottomWallShortAlign=e.bottomWallShortAlign)}else r[a]=e}return n.cellInfos=Object.values(r),n}(n)),n}}function ar(n,r){var t=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","use");return t.classList.add(r),n===A.IMAGE?e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#image-icon"):n===A.VIDEO?e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#video-icon"):n===A.AUDIO&&e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#audio-icon"),t.appendChild(e),t}function ur(n,r,t){if(!n||0===n.length)return!1;try{for(var e=0;e<n.length;e++)if((null===t||(r?n[e].clueSection===r:n[e].acrossNotDown===t))&&(n[e].clue.clue&&n[e].clue.clue.length>0||n[e].clue.media&&n[e].clue.media.length>0||n[e].clue.url&&n[e].clue.url.length>0))return!0;return!1}catch(n){en("Could not check if clues were present in section "+(t?"across":"down")+" Exception: "+n+", Stacktrace: "+n.stack)}return!0}var cr=function(n,r){var t="function"==typeof Symbol&&n[Symbol.iterator];if(!t)return n;var e,o,i=t.call(n),a=[];try{for(;(void 0===r||r-- >0)&&!(e=i.next()).done;)a.push(e.value)}catch(n){o={error:n}}finally{try{e&&!e.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return a},fr=function(n,r,t){if(t||2===arguments.length)for(var e,o=0,i=r.length;o<i;o++)!e&&o in r||(e||(e=Array.prototype.slice.call(r,0,o)),e[o]=r[o]);return n.concat(e||Array.prototype.slice.call(r))};function lr(n){var r=null;if(n.cages){r=fr([],cr(Array(n.w)),!1).map((function(r){return Array(n.h)}));for(var t=0;t<n.cages.length;t++)for(var e=n.cages[t],o=0;o<e.cells.length;o++){var i=e.cells[o],a=i[0],u=i[1];r[a][u]=e}}return r}var sr,dr,vr,Er=function(n){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&n[r],e=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&e>=n.length&&(n=void 0),{value:n&&n[e++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")};function pr(n,r,t,e){sr=n,r,dr=t,e}function wr(n,r,t){dr[n][r].addClass(t)}function mr(n,r,t){dr[n][r].removeClass(t)}function gr(n,r,t,e){return n[r][t]!==_n||Cn(e)&&!Dn(e)?Mn(n,e.isImported,r,t)&&!Cn(e)?f.STOP:f.LETTER:f.EMPTY}function hr(n,r,t){var e=gr(n,r,t,sr);dr[r][t].hasClass(e)||(e!=f.LETTER&&dr[r][t].removeClass(f.LETTER),e!=f.EMPTY&&dr[r][t].removeClass(f.EMPTY),e!=f.STOP&&dr[r][t].removeClass(f.STOP),wr(r,t,e))}function _r(n,r,t){!function(n){for(var r=0;r<sr.w;r++)for(var t=0;t<sr.h;t++)hr(n,r,t)}(r),function(n){for(var r=0;r<sr.w;r++)for(var t=0;t<sr.h;t++)n[r][t]&&!dr[r][t].hasClass("void")?wr(r,t,"void"):!n[r][t]&&dr[r][t].hasClass("void")&&mr(r,t,"void")}(n),function(n,r){if(!Nn(sr)&&!Cn(sr)){for(var t=r?"box-right-edge":"box-left-edge",e=r?"box-left-edge":"box-right-edge",o=r?"box-right-wall":"box-left-wall",i=r?"box-left-wall":"box-right-wall",a=0;a<sr.w;a++)for(var u=0;u<sr.h;u++)if(dr[a][u].removeClass("box-top-edge"),dr[a][u].removeClass(e),dr[a][u].removeClass("box-bottom-edge"),dr[a][u].removeClass(t),n[a][u]?(a+1<sr.w&&!n[a+1][u]&&dr[a][u].addClass(e),u+1<sr.h&&!n[a][u+1]&&dr[a][u].addClass("box-bottom-edge")):(dr[a][u].addClass(e),dr[a][u].addClass("box-bottom-edge"),0===a&&dr[a][u].addClass(t),0===u&&dr[a][u].addClass("box-top-edge")),In(sr)){0===a&&(dr[a][u].removeClass(t),dr[a][u].addClass(o)),0===u&&(dr[a][u].removeClass("box-top-edge"),dr[a][u].addClass("box-top-wall"));var c=-1===sr.subgridWidth?sr.w:sr.subgridWidth,f=-1===sr.subgridHeight?sr.h:sr.subgridHeight;(a+1)%c==0&&(dr[a][u].removeClass(e),dr[a][u].addClass(i)),(u+1)%f==0&&(dr[a][u].removeClass("box-bottom-edge"),dr[a][u].addClass("box-bottom-wall")),In(sr)&&sr.isSudokuX&&(a!==u&&a!==sr.w-u-1||dr[a][u].addClass("sudoku-x-box"))}if(In(sr)&&sr.cages){var l=lr(sr);!function(n,r,t){if(n.cages&&r){n.alphabets.length<7&&$(".grid-area").addClass("smaller-sudoku-grid");for(var e=0;e<n.w;e++)for(var o=0;o<n.h;o++){var i=r[e][o];if(i){var a=t[e][o];a.addClass("cage");var u=$(document.createElement("div"));u.addClass("cage-primary");var c=o-1>=0&&r[e][o-1]===i,f=e-1>=0&&r[e-1][o]===i,l=o+1<r[e].length&&r[e][o+1]===i,s=e+1<r.length&&r[e+1][o]===i;c||u.addClass("top-wall"),f||u.addClass("left-wall"),l||u.addClass("bottom-wall"),s||u.addClass("right-wall"),a.append(u);var d,v=o-1>=0&&e-1>=0&&r[e-1][o-1]===i,E=o-1>=0&&e+1<r.length&&r[e+1][o-1]===i,p=o+1<r[e].length&&e+1<r.length&&r[e+1][o+1]===i,w=o+1<r[e].length&&e-1>=0&&r[e-1][o+1]===i;c&&f&&!v&&((d=$(document.createElement("div"))).addClass("cage-secondary"),d.addClass("cage-left-top"),a.append(d)),c&&s&&!E&&((d=$(document.createElement("div"))).addClass("cage-secondary"),d.addClass("cage-right-top"),a.append(d)),l&&s&&!p&&((d=$(document.createElement("div"))).addClass("cage-secondary"),d.addClass("cage-right-bottom"),a.append(d)),l&&f&&!w&&((d=$(document.createElement("div"))).addClass("cage-secondary"),d.addClass("cage-left-bottom"),a.append(d))}}}}(sr,l,dr)}}}(n,t)}function br(n,r){if(n){var t=n.x,e=n.y,o=dr[t][e].find("span.box-with-background-shape").length>0;if(n.isCircled&&!o?dr[t][e].prepend($('<span class="box-with-background-shape"></span>')):!n.isCircled&&o&&$("span.box-with-background-shape",dr[t][e]).remove(),n.bgColor?Wn(t,e,{"background-color":n.bgColor},dr,vr):dr[t][e].css("background-color",""),n.fgColor?Wn(t,e,{color:n.fgColor},dr,vr):dr[t][e].css("color",""),!In(sr)){var i=r?"box-left-wall":"box-right-wall";n.rightWall?n.displayRightWallShort?(dr[t][e].addClass("box-right-wall-short"),n.rightWallShortAlign&&dr[t][e].addClass(n.rightWallShortAlign)):dr[t][e].addClass(i):dr[t][e].removeClass(i);var a="box-bottom-wall";n.bottomWall?n.displayBottomWallShort?(dr[t][e].addClass("box-bottom-wall-short"),n.bottomWallShortAlign&&dr[t][e].addClass(n.bottomWallShortAlign)):dr[t][e].addClass(a):dr[t][e].removeClass(a)}}}function Or(n,r,t){if(void 0===t&&(t=sr.box),!qn||!qn()){var e=function(n){for(var r=[],t=0;t<n.w;t++){r[t]=[];for(var e=0;e<n.h;e++)r[t][e]=!1}if(n.cellInfos)for(var o=0;o<n.cellInfos.length;o++){var i=n.cellInfos[o];t=i.x,e=i.y,i.isVoid&&(r[t][e]=!0)}return r}(sr);_r(e,t,r),function(n,r){var t,e;if(n)try{for(var o=Er(n),i=o.next();!i.done;i=o.next())br(i.value,r)}catch(n){t={error:n}}finally{try{i&&!i.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}}(n,r)}}function Sr(n,r,t,e,o,i,a,u,c,f){if(!n)return en("No puzzle to draw_grid - How come?"),[];if(f)return f(n,r,n.boxImageURL,e,o);if(1!==r.length)return en("Unexpected grid length on this page (Expected 1). Got "+r.length+"."),[];if(r.html(""),Tn(n)){var l="#theme-design-for-".concat(n.w,"by").concat(n.h);if((m=$(l))&&0!==m.length&&$.trim(m.html())){var s=document.querySelector(l).getAttribute("viewBox"),d=$(document.createElementNS("http://www.w3.org/2000/svg","svg"));d.addClass("crossword-svg"),d.html($(l).html()),d.attr("viewBox",s),r.parents(".grid-area").addClass("svg-display"),r.append(d);for(var v=[],E=0;E<n.w;E++)for(var p=0;p<n.h;p++){var w=$('.box[data-x="'.concat(E,'"][data-y="').concat(p,'"]'),r);0===p?v.push([w]):v[E].push(w)}if(r.find(".cluenum-in-box").length>0)for(E=0;E<n.clueNums.length;E++)for(p=0;p<n.clueNums[E].length;p++)n.clueNums[E][p]&&"0"!==n.clueNums[E][p]&&$(".cluenum-in-box",v[E][p]).text(n.clueNums[E][p]);return pr(n,r,v,c),v}}for(var m,g="",h=e?n.w-1:0,_=e?0:n.w-1,b=e?-1:1,O=0;O<n.h;O++){for(var S=h;e?S>=_:S<=_;S+=b){var L="",T=gr(n.box,S,O,n),R="";if(u){var I="";if(n.boxToPlacedWordsIdxs[S][O]){for(var x=0;x<n.boxToPlacedWordsIdxs[S][O].length;x++){var C=n.placedWords[n.boxToPlacedWordsIdxs[S][O][x]];if(C&&C.clue){var N=C.acrossNotDown?e?"←":"→":"↓";I+="<b>".concat(N,"</b> ").concat(C.clue.clue,"<br/>")}}I.length>0&&(R='data-toggle="popover" data-trigger="hover" data-placement="auto top" data-html="true" data-content="'.concat(I,'" data-container="body"'))}}L+="<div ".concat(R,' class="box ').concat(T,'">'),yn(n)||(L+="<div class='error-wrong-letter-bg'></div>"),In(n)&&n.isPicdoku&&(L+="<div class='picdoku-bg'></div>");var D="";!o&&n.clueNums&&n.clueNums[S][O]&&"0"!==n.clueNums[S][O]&&(D='<span  class="cluenum-in-box">'+n.clueNums[S][O]+"&zwj;</span>"),(!Mn(n.box,n.isImported,S,O)&&n.box[S][O]!==_n||yn(n)||i)&&(L+=D+'<span class="letter-in-box"> </span>'),g+=L+="</div>"}g+='<div class="endRow"></div>'}r.append(g);for(var y=[],M=0;M<n.w;M++)y[M]=[];for(var P=r.find(".box"),G=(E=e?n.w-1:0,p=0,0);G<P.length;G++){var U=P[G];$(U).data("x",E),$(U).data("y",p),y[E][p]=$(U),(E+=e?-1:1)===(e?-1:n.w)&&(p++,E=e?n.w-1:0)}if(pr(n,r,y,c),Or(n.cellInfos,e),In(n)&&function(n,r,t){var e,o,i,a,u,c;if(n.alphabets){var f,l,s,d,v=0===r.find(".pencil-box").length;f=null!==(e=r.find(".box").width())&&void 0!==e?e:0,l=null!==(o=r.find(".box").height())&&void 0!==o?o:0;var E=r.find(".cluenum-in-box");if(E.length>0){var p=E.position().top+(null!==(i=E.outerHeight())&&void 0!==i?i:0);l-=p,d=p}else d=(r.find(".box").outerHeight(!0)-r.find(".box").height())/2;var w=r.find(".cage-primary.left-wall");if(w.length>0){var m=parseInt(null!==(a=w.css("border-left-width").replace("px",""))&&void 0!==a?a:"0"),g=(null!==(u=r.find(".box").width())&&void 0!==u?u:0)-(null!==(c=w.outerWidth())&&void 0!==c?c:0);0===g?g=m:g-=m,f-=2*g,s=m,l-=2*g}else s=(r.find(".box").outerWidth(!0)-r.find(".box").width())/2;for(var h=0;h<t.length;h++)for(var _=0;_<t[h].length;_++){var b=void 0;(b=v?$("<div class='pencil-letters-in-box'></div>"):t[h][_].find(".pencil-letters-in-box")).width(f).height(l).css("top",d).css("left",s),v&&t[h][_].append(b)}var O=n.alphabets,S=Math.ceil(Math.sqrt(O.length)),L=Math.ceil(O.length/S);v&&$(".pencil-letters-in-box").css("grid-template-columns","repeat(".concat(S,", 1fr)")).css("grid-template-rows","repeat(".concat(L,", 1fr)"));var T,R=!1;if(n.alphabetMapping){for(h=void 0,h=0;h<n.alphabets.length&&!(n.alphabetMapping[n.alphabets[h]].length>2);h++);h==n.alphabets.length&&(R=!0)}var A=f/S,I=l/L;for(T=Math.floor(.85*Math.min(A,I)),h=0;h<t.length;h++)for(_=0;_<t[h].length;_++){var x=t[h][_];if(!x.hasClass("prerevealed-box"))for(var C=0;C<O.length;C++){var N=O[C],D=void 0;if(v){var y=N;R&&(y=n.alphabetMapping[N]),D=$('<div class="pencil-box invisible" data-alphabet="'+N+'">'+'<span class="pencil-box-entry">'.concat(y,"</span>")+"</div>")}else D=$(".pencil-box[data-alphabet="+N+"]",x);D.css("font-size",T+"px"),v&&x.find(".pencil-letters-in-box").append(D)}}}}(n,r,y),function(n,r,t,e){if(!r.imagesInGrid)return;for(var o=0;o<r.imagesInGrid.length;o++){var i=r.imagesInGrid[o],a=i.image,u=i.imageFormat;if("gif"!==u||n){var c=$('.image-in-grid[data-image-count="'+o+'"]',t);if(c.length<1){c=$('<div class="image-in-grid" data-image-count="'+o+'"></div>'),t.append(c);var f=new Image;c.append(f),"jpg"===u.toLowerCase()||"jpeg"===u.toLowerCase()||"png"===u.toLowerCase()||"gif"===u.toLowerCase()?f.src="data:image/"+u.toLowerCase()+";base64,"+a:"url"===u&&(f.src=a)}}}}(a,n,r),t){var H='url("'+t+'")';r.find(".box.empty, .box.stop").css("background-color","transparent").css("background-image",H).css("background-size","100% 100%").css("background-repeat","no-repeat").addClass("hasBoxImage")}return Tn(n)&&function(n,r){for(var t=0;t<n.placedWords.length;t++){var e=n.placedWords[t];if(e&&e.clue&&(e.x||0===e.x)&&(e.y||0===e.y)&&(e.clue.hasImage||e.clue.hasVideo||e.clue.hasAudio)){var o=r[e.x][e.y],i=o.find(".box-media");i.length||(i=$("<div class='box-media'></div>"),o.append(i));var a=ar(e.clue.hasImage?A.IMAGE:e.clue.hasVideo?A.VIDEO:A.AUDIO,"box-icon");i.append($(a))}}}(n,y),y}function Lr(n,r,t,e,o,i,a,u){var f,l,s,d,v;function E(n,r,t){In(n)&&n.alphabetMapping&&!n.isPicdoku&&(t=n.alphabetMapping[t]),r.find(".letter-in-box").text(t)}e.css("visibility","hidden");var p=e.find(".crossword");if(1===p.length){v=Sr(n,p,n.boxImageURL,null!==(f=r.rtlGrid)&&void 0!==f&&f,null!==(l=r.hideClueNums)&&void 0!==l&&l,!1,!1,!1,u),e.css("left",o.gridLeft+"px").css("top",o.gridTop+"px").css("width",o.gridWidthInPX+"px"),function(){function r(r,t){E(n,v[r][t],n.box[r][t])}function t(t,e){for(var o=n.clueNums[t][e],i=0;i<n.w;i++)for(var a=0;a<n.h;a++){if(t!==i||e!==a)n.clueNums[i][a]===o&&(r(i,a),v[i][a].addClass("prerevealed-box"))}}if(n.preRevealIdxs){e.find(".prerevealed-box").removeClass("prerevealed-box");for(var o=0;o<n.box.length;o++)for(var i=0;i<n.box[o].length;i++)!0===n.preRevealIdxs[o][i]&&(r(o,i),v[o][i].addClass("prerevealed-box"),Rn(n)&&t(o,i))}}();for(var w=r.showAnswers||yn(n)?n.box:a,m=0;m<v.length;m++)for(var g=0;g<v[m].length;g++){var h=v[m][g],_=w&&w.length>0&&w[m].length>0?w[m][g]:hn;_&&_!==hn&&_!==_n&&!Mn(n.box,n.isImported,m,g)&&(E(n,h,_),!r.showAnswers&&t&&t.length>0&&t[m][g]===c.PENCIL_FILLED&&h.addClass("pencil-entry"))}return 1!==$(".crossword-svg").length&&(function(){var r,t=null!==(r=e.width())&&void 0!==r?r:0,o=Math.floor(t/n.w);e.find(".box").css({height:o,width:o})}(),function(){var n;if(i){var r=null!==(n=e.find(".box").width())&&void 0!==n?n:0;if(r>0){var t=.3*r;t<9?t=9:t>r&&(t=r),e.find(".cluenum-in-box").css("font-size",t.toString()+"px")}}}(),function(){function t(t,e){var o,a,u;if(e&&0!==e.length&&i){var c,f=t.find(".letter-in-box"),l=p.find(".cluenum-in-box").length>0,s=null!==(o=t.innerHeight())&&void 0!==o?o:0;c=l?s-((null!==(a=p.find(".cluenum-in-box").outerHeight())&&void 0!==a?a:0)+p.find(".cluenum-in-box").position().top):s*(Tn(n)||An(n)?r.useChessView?.7:.9:.6),f.css("font-size",c).css("line-height","1");var d,v,E=ln(e);if((E||(d=e,v=!1,null!==(u=r.useChessView)&&void 0!==u&&u?d.length>2:v?d.length>0:d.length>1))&&(E&&(c-=5,f.css("font-size",c).css("line-height","")),function(n){if(n.css("font-size"))for(var r=0,t=n[0],e=parseInt(n.css("font-size").replace("px",""));t.scrollWidth>t.clientWidth&&r<1e3;)e-=.2,n.css("font-size",e+"px"),r++}(f),t.addClass("rebus-box")),Tn(n)||Rn(n)){var w=10*Math.floor(s/10);w=Math.min(w,80),t.addClass("box-wnh-"+w)}}}for(var e=0;e<n.w;e++)for(var o=0;o<n.h;o++){var a=v[e][o],u=a.find(".letter-in-box").text();t(a,u)}}(),function(n,r,t){function e(n,t,e,o,i){var a,u,c,f,l=(null!==(a=r.find(".box").outerHeight())&&void 0!==a?a:0)*e,s=(null!==(u=r.find(".box").outerWidth())&&void 0!==u?u:0)*t,d=(null!==(c=r.find(".box").outerHeight())&&void 0!==c?c:0)*(i-e+1)-1,v=(null!==(f=r.find(".box").outerWidth())&&void 0!==f?f:0)*(o-t+1)-1;n.css({top:l,left:s,height:d,width:v});var E=n.find("img");E.height(d),E.width(v)}if(n.imagesInGrid)for(var o=0;o<n.imagesInGrid.length;o++){var i=n.imagesInGrid[o];e($('.image-in-grid[data-image-count="'+o+'"]',r),i.startX,i.startY,i.endX,i.endY)}}(n,p)),(r.randomlyRotateLetters||r.randomlyScaleLetters)&&function(n,r,t,e){if(n||r)for(var o=0;o<t.w;o++)for(var i=0;i<t.h;i++){var a="";n&&(a.length>0&&(a+=" "),a+="rotate("+45*Math.floor(wn(1,8))+"deg)"),r&&(a.length>0&&(a+=" "),a+="scale("+(1+Math.floor(wn(-1,3))/10)+")"),$(Vn.LETTER_IN_BOX,e[o][i]).css("transform",a)}}(null!==(s=r.randomlyRotateLetters)&&void 0!==s&&s,null!==(d=r.randomlyScaleLetters)&&void 0!==d&&d,n,v),e.css("visibility","visible"),v}en("Number of .crossword elements under grid_area is not 1. num_elements: "+p.length)}var Tr=t(6926),Rr=t.n(Tr),Ar=function(n,r,t,e,o){var i;function a(n,r){if("none"===r.css("display"))return!1;var t=parseInt(n.css("left")),e=parseInt(r.css("left"));return t+n.width()+h>e&&t<e+r.width()+h}var u,f={showFoundAnswers:function(n){for(var t=0;t<n.length;t++)if(n[t]!==v.EMPTY&&n[t]!==v.HINT_SHOWN){var i=Gn(r.placedWords[t]);i.splice(1,i.length-2),Zn(i,o,u,t,"",{},!0,e.rtlGrid)}},showAllAnswers:function(){for(var n=0;n<r.placedWords.length;n++){var t=Gn(r.placedWords[n]);t.splice(1,t.length-2),Zn(t,o,u,n,"",{},!0,e.rtlGrid)}}};var l,s,d=null;e.primaryState&&(d=X(Y(e.primaryState)));var E,p,w,m=r.wordLengthsEnabled,g=1380,h=5,_=5,b=o.find(".grid-area"),O=o.find("#title-instructions"),S=o.width(),L=un(),T=function(n){var r;if(In(n))return r={nCol:6,grid:{startCol:2,endCol:6},title:{startCol:2,endCol:6},adjustClueColumns:!0,autoAdjustFonts:!0,showTitle:!0};if(Rn(n))return r={nCol:6,grid:{startCol:2,endCol:6},title:{startCol:2,endCol:6},adjustClueColumns:!0,autoAdjustFonts:!0,showTitle:!0,gridBelowTitle:!0};r={nCol:5,grid:{startCol:3,endCol:6},title:{startCol:1,endCol:3},adjustClueColumns:!0,autoAdjustFonts:!0,showTitle:!0},n.w<=9?(r.nCol=2,r.grid.startCol=2,r.grid.endCol=3,r.title.startCol=1,r.title.endCol=2,r.adjustClueColumns=!1):n.w<=21?(r.grid.startCol=3,r.grid.endCol=6):(r.grid.startCol=1,r.grid.endCol=6),(e.gridOnly||e.hideClueColumns&&Cn(n))&&(r.nCol=10,r.grid.startCol=2,r.grid.endCol=10,r.title.startCol=2,r.title.endCol=10),e.cluesAndAnswersText&&(r.nCol=1,r.title.startCol=1,r.title.endCol=2),"nymag"===e.theme?(r.nCol=5,r.grid.startCol=1,r.grid.endCol=4,r.title.startCol=1,r.title.endCol=4,r.gridBelowTitle=!0,e.gridOnly?(e.showAnswers?r.gridWidthInPX=670:r.gridWidthInPX=790,r.gridLeft=Math.floor((S-r.gridWidthInPX)/2),r.autoAdjustFonts=!1):e.cluesAndAnswersText&&(r.nCol=1,r.title.startCol=1,r.title.endCol=2)):"guardian"===e.theme?(r.nCol=4,r.grid.startCol=1,r.grid.endCol=3,r.title.startCol=1,r.title.endCol=3,r.gridBelowTitle=!0):"narrow"===e.theme&&(r.nCol=2,r.grid.startCol=1,r.grid.endCol=3,r.title.startCol=1,r.title.endCol=3,r.gridBelowTitle=!1,r.clue||(r.clue={}),r.clue["font-size"]=15,r.adjustClueColumns=!0,r.showTitle=!1),L.nCol&&(r.nCol=parseInt(L.nCol)),L.gridStart&&(r.grid.startCol=parseInt(L.gridStart)),L.gridEnd&&(r.grid.endCol=parseInt(L.gridEnd)),L.titleStart&&(r.title.startCol=parseInt(L.titleStart)),L.titleEnd&&(r.title.endCol=parseInt(L.titleEnd));try{"undefined"!=typeof customConfigFromFile&&customConfigFromFile&&(r=function(n,r){return r?(r["print-ncols"]&&(n.nCol=parseInt(r["print-ncols"])),"left"===r["grid-position"]?2===n.nCol?(n.grid.startCol=1,n.grid.endCol=2):4===n.nCol?(n.grid.startCol=1,n.grid.endCol=3):5===n.nCol&&(n.grid.startCol=1,n.grid.endCol=4):"right"===r["grid-position"]&&(2===n.nCol?(n.grid.startCol=2,n.grid.endCol=3):4===n.nCol?(n.grid.startCol=2,n.grid.endCol=4):5===n.nCol&&(n.grid.startCol=3,n.grid.endCol=6)),"above"===r["title-position"]?(n.title.startCol=n.grid.startCol,n.title.endCol=n.grid.endCol,n.gridBelowTitle=!0):"below"===r["title-position"]?(n.title.startCol=n.grid.startCol,n.title.endCol=n.grid.endCol,n.gridBelowTitle=!1):"beside"===r["title-position"]&&("left"===r["grid-position"]?2===n.nCol?(n.title.startCol=2,n.title.endCol=3):4===n.nCol?(n.title.startCol=3,n.title.endCol=5):5===n.nCol&&(n.title.startCol=4,n.title.endCol=6):"right"===r["grid-position"]&&(2===n.nCol?(n.title.startCol=1,n.title.endCol=2):(4===n.nCol||5===n.nCol)&&(n.title.startCol=1,n.title.endCol=3))),n):n}(r,customConfigFromFile))}catch(n){en(n)}return e.clueFontSizeStep>1&&r.nCol>3&&(e.clueFontSizeStep<=3?(r.nCol=4,1===r.grid.startCol?(r.title.startCol=1,n.w<=21?(r.grid.endCol=4,r.title.endCol=4):(r.grid.endCol=5,r.title.endCol=5)):(r.grid.endCol=5,r.title.endCol=5,n.w<=21?(r.grid.startCol=2,r.title.startCol=2):(r.grid.startCol=1,r.title.startCol=1))):(r.nCol=3,r.grid.startCol=1,r.grid.endCol=4,r.title.startCol=1,r.title.endCol=4)),r}(r=ir(r=or(r),e));if(function(n){E=parseFloat(o.find(".clueText").css("font-size").replace("px","")),p=parseFloat(o.find(".clue-header").css("font-size").replace("px","")),o.find(".dummy-element").remove(),0!==e.clueFontSizeStep&&(E+=3*e.clueFontSizeStep,p+=3*e.clueFontSizeStep),L.pageWidth&&(o.width(L.pageWidth),S=o.width()),L.pageHeight&&(g=L.pageHeight),w=Math.floor((S-h*(n.nCol-1))/n.nCol)}(T),e.rtlGrid&&o.addClass("rtl-grid"),e.rtlInterface&&o.addClass("rtl-interface"),r.w<16&&o.addClass("print-large"),Cn(r)&&r.placedWords.sort(tr),function(v){var S,L,T,R,I,x=0,C=0;function N(e){var i=o.find(".answers-area");if(i.length<1){i=n('<div class="answers-area"></div>'),n(".main_body").append(i);var a=o.find(".clue-list").last();if(a.length>0){var u=a.offset().top+a.outerHeight()+_;i.css({top:u})}}var c=null===e?"Answers":e?t.across:t.down,f=n('<div class="cluesection-answers-div '+c+'-answers"></div>'),l=n('<div class="clue-header-for-answers">'+c+": </div>");f.append(l);for(var s=0;s<r.placedWords.length;s++){var d=r.placedWords[s],v=Cn(r)?"":d.clueNum;if(null===e||e===d.acrossNotDown){var E=n('<div class="answer"></div>'),p=n('<div class="cluenum-for-answers">'+v+"</div>"),w=n('<div class="answer-text">'+d.originalTerm+",</div>");E.append(p).append(w),f.append(E)}}var m=f.find(".answer-text").last(),g=m.text();m.text(g.replace(",",".")),i.append(f),i.show()}function D(r){var t=x*g-n(".page").offset().top,e=!1,i=!1;return 0===x&&(a(r,b)&&(t+=b.offset().top+b.outerHeight(),i=!0),a(r,O)&&(t+=O.offset().top+O.outerHeight(),e=!0),e&&i&&a(O,b)&&(t-=b.offset().top+b.outerHeight()),t+=e||i?_:o.find(".header").outerHeight()),i&&e&&v.gridBelowTitle&&(t+=3*_),t}function y(i,a,u){function c(){var r=o.find(".clue-list").length,t=n('<div class="clue-list list-'+(r+1)+'"></div>'),e=C*(s+h);return++C>l&&(x++,e=0,C=1),t.css("left",e).css("width",s),t.css("top",D(t)),t}function f(n){var r=o.find(".clue-list");return!(r.length>0)||(r.last().append(n),n.offset().top+n.outerHeight()>g*(x+1))}var l=v.nCol,s=w,d=n(".page-"+x,o);An(r)&&r.placedWords.sort((function(n,r){var t,e,o=(null!==(t=n.nBoxes)&&void 0!==t?t:0)-(null!==(e=r.nBoxes)&&void 0!==e?e:0);return 0!==o?o:n.clue&&n.clue.clue&&r.clue&&r.clue.clue?n.clue.clue.localeCompare(r.clue.clue):0}));var m=a?t.across:t.down;r.clueSections&&i&&(m=i);var _,b=n('<div class="clue-header '+m.toLowerCase()+'" style="font-size: '+p+'px;">'+m+"</div>");_=Tn(r)&&f(b)?c():o.find(".clue-list").last(),v.clue&&v.clue["font-size"]&&(E=v.clue["font-size"]),d.append(_),Cn(r)||An(r)||_.append(b);for(var O=a?"A":"D",S=0;S<r.placedWords.length;S++){var L=r.placedWords[S];if(!Tn(r)||e.useChessView||L.clueNum&&"0"!==L.clueNum){var T=null===a,R=An(r)&&a,I=r.clueSections?L.clueSection===i:L.acrossNotDown===a;if(T||R||I){var N=null;if(An(r)&&(0==S||r.placedWords[S-1].nBoxes!==L.nBoxes)){var y=n("<span>"+t.n_letter_words+"</span>");y.find(".wordlen").html(L.nBoxes.toString()),(N=n('<div class="clue-header" style="font-size: '+p+'px;">'+y.html()+"</div>")).attr("data-wordlen",L.nBoxes)}var M=Cn(r)||An(r)?"":e.useChessView?Xn(r,L):L.clueNum,P=L.acrossNotDown?"across":"down",G=L.clue.clue;if(An(r)&&G.replace(" ","").toUpperCase()!==L.word.toUpperCase()&&(G?G+=" - "+L.word.toUpperCase():G=L.word.toUpperCase()),u&&(G+=" "+kn(L)),L.clue.media&&L.clue.media.length>0)for(var U=0;U<L.clue.media.length;U++){var H=L.clue.media[U].URL,k=L.clue.media[U].mediaType;G.length>0&&(G+="<br>"),G+='<span class="multimedia-clue-placeholder">';G+=(k==A.IMAGE?t.print_image_clue_placeholder:k==A.AUDIO?t.print_audio_clue_placeholder:k==A.VIDEO?t.print_video_clue_placeholder:H)+"</span>"}G&&G.length>0||(G='<span style="visibility: hidden;">No clue</span>');var W=n('<div class="clueNum">'+M+"</div>");W.css("font-size",E+"px");var F=n('<div class="clue"><span class="clueText">'+G+"</span></div>");F.css({width:.8*w+"px","font-size":E+"px"});var $=n('<div class="clueDiv" cluenum="'+M+O+'" direction="'+P+'"></div>');if((Cn(r)||An(r))&&$.attr("data-wordnum",S),$.append([W,F]),e.showAnswers){var z=rr(L,t.related_link);F.append(n(z))}f($)&&(_=c(),x>0&&1===C&&(d=n('<div class="page page-'+x+'"></div>'),o.append(d)),d.append(_)),N&&_.append(N),_.append($)}}}}if(function(){if(r){if(d)if(In(r)){var n=function(n,r,t){function e(r){for(var t=parseInt(r,16),e=new Set,o=0;t>0;)1==(1&t)&&e.add(n.alphabets[o]),t>>=1,o++;return e}var o={pencilEntries:[],current_state:[]};if(!r)return o;try{for(var i=0,a=0,u=0;a<n.w&&u<n.h;){0===u&&(o.current_state.push([]),o.pencilEntries.push([])),o.pencilEntries[a][u]||o.pencilEntries[a].push(new Set);var c=r.charAt(i);if("["===c){var f="";for(i+=1;"]"!==r.charAt(i)&&i<r.length;)f+=r.charAt(i),i++;o.pencilEntries[a][u]=e(f),o.current_state[a][u]=hn}else if(c===bn){for(f="",i+=1;r.charAt(i)!==On&&i<r.length;)f+=r.charAt(i),i++;o.current_state[a][u]=f}else"\\"===c?(f="",i++,f+=r.charAt(i),o.current_state[a][u]=f):o.current_state[a][u]="#"===c?hn:c;i++,++a===n.w&&(a=0,u++)}}catch(n){"undefined"!=typeof ga&&ga("send","exception",{exDescription:"ERROR decodeBoxVal box for playid:"+t+", error:"+n,exFatal:!1}),en("ERROR in decodeBoxVal Exception:"+n)}return o}(r,d,"");i=n.current_state}else Cn(r)?s=function(n,r){var t=[];if(!r||0===r.length)return t;if(r.length!==n.length)return en("Length of the encoded word state string is inconsistent with cross.placedWords.length, "+r.length+" != "+n.length,!0),t;for(var e=0;e<r.length;e++)t.push(parseInt(r[e]));return t}(r.placedWords,d):i=function(n,r,t){var e=[];if(!r)return e;try{for(var o=0,i=0,a=0;i<n.w&&a<n.h;){if(0===a&&e.push([]),Mn(n.box,n.isImported,i,a)&&!Cn(n))e[i][a]=Sn;else if(n.box[i][a]!==_n||Cn(n)){var u=r.charAt(o);if(u===bn){var c="";for(o+=1;r.charAt(o)!==On&&o<r.length;)c+=r.charAt(o),o++;e[i][a]=c}else"\\"===u?(c="",o++,c+=r.charAt(o),e[i][a]=c):e[i][a]="#"===u?hn:u;o++}else e[i][a]=_n;++i===n.w&&(i=0,a++)}}catch(n){"undefined"!=typeof ga&&ga("send","exception",{exDescription:"ERROR decodeBoxVal box for playid:"+t+", error: "+n+", Stacktrace: "+n.stack,exFatal:!1}),en("ERROR in decodeBoxVal Exception: "+n+", Stacktrace: "+n.stack)}return e}(r,d,"");else{i=[],i=[];for(var t=0;t<r.w;t++)i[t]=[];for(var o=0;o<r.h;o++)for(var a=0;a<r.w;a++)Mn(r.box,r.isImported,a,o)?i[a][o]=Sn:r.box[a][o]==_n?i[a][o]=_n:i[a][o]=hn}if(e.secondaryState){var u=X(Y(e.secondaryState));l=function(n,r){var t=[];if(!r)return t;for(var e=0,o=0,i=0;o<n.w&&i<n.h;){if(0===i&&t.push([]),Mn(n.box,n.isImported,o,i))t[o][i]=c.UNFILLED;else if(n.box[o][i]===_n)t[o][i]=c.UNFILLED;else{var a=r.charAt(e);t[o][i]=parseInt(a),e++}++o===n.w&&(o=0,i++)}return t}(r,u)}}}(),e.cluesAndAnswersText&&(n("#title-instructions").remove(),n(".header").remove()),e.gridOnly&&n(".header").remove(),e.cluesAndAnswersText||(e.hideClueNums=e.gridOnly&&e.showAnswers||Cn(r)||An(r)||e.useChessView,u=Lr(r,e,l,b,function(){var n=v.grid.startCol,r=v.grid.endCol;r<=n&&alert("Starting column number must be smaller than ending column number for grid");var t=o.find(".header").outerHeight(!0)+_;return{gridLeft:v.gridLeft||0===v.gridLeft?v.gridLeft:Math.floor((n-1)*w+(n-1)*h),gridTop:t,gridWidthInPX:v.gridWidthInPX?v.gridWidthInPX:Math.floor((r-n)*w+(r-n-1)*h)-5*h}}(),v.autoAdjustFonts,i,o)),e.emptyBoxOpacity){var M;if(M=o.find(".box.empty").css("background-color")){var P=M.replace("rgb","rgba").replace(")",", "+e.emptyBoxOpacity+")");o.find(".box.empty").css("background-color",P)}if(M=o.find(".box.stop").css("background-color")){P=M.replace("rgb","rgba").replace(")",", "+e.emptyBoxOpacity+")");o.find(".box.stop").css("background-color",P)}}e.gridOnly||e.cluesAndAnswersText||function(){if(v.showTitle||O.css("display","none"),"guardian"===e.theme){n(".date").text(function(n,r,t){var e;if(function(){try{(new Date).toLocaleDateString("i")}catch(n){return"RangeError"===n.name}return!1}()){var o={year:"numeric",month:"long",day:"numeric"};"no-NO"===r&&(r="nb-NO");try{e=n.toLocaleDateString(r,o)}catch(e){t("toLocaleDateString failed with locale string:"+r+" d: "+n+" options: "+o+" error: "+e)}}return e||(e=["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]+" "+n.getDate()+", "+n.getFullYear()),e}(new Date(r.publishTime),"en-GB",en)),n(".title").text(r.title),n(".puzzle-type").text(r.puzzleType.charAt(0).toUpperCase()+r.puzzleType.slice(1).toLowerCase());var t=e.set?e.set:"",o=window.setToSetMetadata[t].displayName?window.setToSetMetadata[t].displayName:"";Rn(r)||n(".series-title").text(o),r.author&&(n(".author-name").text(r.author),n(".author").css("display","block"))}var i=v.title.startCol,u=v.title.endCol;u<=i&&alert("Starting column number must be smaller than ending column number for grid");var c=Math.floor((u-i)*w+(u-i-1)*h)-5*h;O.css("width",c+"px"),function(){var r=Math.floor((i-1)*(w+h));O.css("left",r+"px");var t=0;a(O,b)?t+=b.offset().top+b.outerHeight(!0)+_:t+=n(".header").outerHeight(!0)+_,O.css("top",t+"px")}(),O.css("visibility","visible")}(),In(r)&&function(n){return In(n)&&n.cages&&-1===n.subgridHeight&&-1===n.subgridWidth}(r)&&b.addClass("kenken"),e.gridOnly||In(r)||Rn(r)||(Cn(r)?e.hideClueColumns||ur(r.placedWords,null,null)&&y(null,null,m):An(r)?ur(r.placedWords,r.clueSections?r.clueSections[0]:null,!0)&&y(r.clueSections?r.clueSections[0]:null,!0,m):Tn(r)&&(ur(r.placedWords,r.clueSections?r.clueSections[0]:null,!0)&&y(r.clueSections?r.clueSections[0]:null,!0,m),ur(r.placedWords,r.clueSections?r.clueSections[1]:null,!1)&&y(r.clueSections?r.clueSections[1]:null,!1,m)),v.adjustClueColumns&&function(){var r=1e5,t=v.nCol,e=o.find(".clue-list").first().width(),i=x*t+1,a=i+(t-1);function u(r){var t=n(".list-"+r.toString()).find(".clueDiv, .clue-header").last();t.remove();var e=n(".list-"+(r+1).toString());e.length>0&&e.prepend(t)}function c(n){return n.find(".clueDiv, .clue-header").length}function f(r,t){for(var e=[],o=0,i=[],a=0,u=r;u<=t;u++){var c=n(".list-"+u.toString()),f=c.find(".clueDiv, .clue-header").last(),l=0;l=f.length>0?f.offset().top+f.outerHeight():c.offset().top,e.push(l),o+=l}for(var s=o/(t-r+1),d=0;d<e.length;d++){var v=Math.abs(s-e[d]);i.push(v),a+=v}return a/i.length}!function(){for(;C<t;){var r=n('<div class="clue-list list-'+(x*t+C+1).toString()+'"></div>'),i=C*(e+h);r.css("left",i+"px");var a=D(r);r.css("top",a+"px").css("width",e+"px"),C++,o.find(">div").last().append(r)}}();for(var l=f(i,a);l<r;){for(var s=a-1;s>=i;s--){var d=n(".list-"+s.toString()),E=n(".list-"+(s+1).toString());if(d.find(".clueDiv").length>0)for(;d.offset().top+d.outerHeight()>E.offset().top+E.outerHeight();){var p=d.find(".clueDiv, .clue-header").last();if(!(p.length>0))break;if(!(p.offset().top+p.outerHeight()>E.offset().top+E.outerHeight()+p.outerHeight()))break;u(s)}}r=l,l=f(i,a)}!function(){for(var r=n(".clue-list").length,t=1;t<=r;t++){var e=n(".list-"+t.toString()).find(">div").last();e.hasClass("clue-header")&&(e.remove(),n(".list-"+(t+1).toString()).prepend(e))}}();for(var w=function(r,t){for(var e=0,o=r;o<=t;o++){var i=n(".list-"+o.toString());e+=i.offset().top+i.outerHeight()}return e/(t-r+1)}(i,a),m=i;m<=a;m++){var g=(w-((d=n(".list-"+m.toString())).offset().top+d.outerHeight()))/c(d);g>30&&(g=30),d.find(".clueDiv").css("padding-top",g/2).css("padding-bottom",g/2)}}()),e.cluesAndAnswersText&&(Cn(r)?N(null):(N(!0),N(!1))),v.gridBelowTitle&&(S=b.offset().top,L=b.outerHeight(!0),T=O.offset().top,R=S+O.outerHeight(!0)+3*_,I=T-L,b.css("top",R),O.css("top",I)),Cn(r)&&(s?f.showFoundAnswers(s):e.showAnswers&&f.showAllAnswers()),Qn(r.box)&&o.addClass("vernacular-puzzle"),Rn(r)&&function(){for(var t="",a=0;a<r.placedWords.length;a++)t+=r.placedWords[a].word;var u,c=(u=t,u.split("").filter((function(n,r,t){return t.indexOf(n)==r})).join("")).split("").sort(),f={},l={},s=new Set,d=e.showAnswers?r.box:i;for(a=0;a<r.box.length;a++)for(var v=0;v<r.box[a].length;v++)if(r.clueNums[a][v]&&"0"!==r.clueNums[a][v]){s.add(r.clueNums[a][v]);var E=r.preRevealIdxs&&r.preRevealIdxs[a][v]?r.box[a][v].toUpperCase():d?d[a][v].toUpperCase():null;null==E||f[E]||(f[E]=r.clueNums[a][v],l[r.clueNums[a][v]]=E)}var p=n('<div class="alphabets-list"></div>');for(a=0;a<c.length;a++){var w=c[a].toString().toUpperCase(),m=n('<div class="alphabet-div" data-entry="'+w+'">'+w+"</div>");f[w]&&m.addClass("codeword-disabled"),p.append(m)}var g=Array.from(s).sort((function(n,r){return parseInt(n)-parseInt(r)})),h=n('<div class="filled-alphabets-code-map"></div>');for(a=0;a<g.length;a++){var O=g[a],S=l[O];m=n('<div class="alphabet-code-box" data-cluenum="'+O+'"><span class="code">'+O+"</span>"+(S?'<span class="alphabet">'+S+"</span>":"")+"</div>"),h.append(m)}var L=o.find(".alphabets-list-area");L.append(p).append(h);var T=b.offset().top+b.outerHeight()+10*_;L.css({top:T})}()}(T),e.callPrint)setTimeout(window.platformPrintPage?window.platformPrintPage:window.print,1e3);else{var R=n(".grid-area"),I=mn(60,!1,o).height,x=mn(60,!1,o).width,C=Math.min(x/R.width(),I/R.height());R.css("transform","scale(".concat(C,")")),R.css("transform-origin","0 0"),Rr().toSvg(document.querySelector(".grid-area")).then((function(n){var t=document.createElement("a");t.download="".concat(r.puzzleType.toLowerCase(),"-").concat(r.id,".svg"),t.href=n,t.click()}))}};window.onReady=function(){var n;if(j||window.standalone){var r=un();(n={}).callPrint=!0,n.showAnswers=!!r.answers&&"1"==r.answers,n.set=r.set?r.set:null,n.primaryState=r.primaryState?function(n){for(var r=2,t="",e=n.length,o=0,i=0;i<e;i++)r=i%3,i>0&&4*i/3%76==0&&(t+="\r\n"),o|=n[i]<<(16>>>r&24),2!==r&&n.length-i!=1||(t+=String.fromCharCode(Z(o>>>18&63),Z(o>>>12&63),Z(o>>>6&63),Z(63&o)),o=0);return t.substr(0,t.length-2+r)+(2===r?"":1===r?"=":"==")}(function(n){for(var r,t,e=n.length,o=0,i=0;i<e;i++)o+=(t=n.charCodeAt(i))<128?1:t<2048?2:t<65536?3:t<2097152?4:t<67108864?5:6;r=new Uint8Array(o);for(var a=0,u=0;a<o;u++)(t=n.charCodeAt(u))<128?r[a++]=t:t<2048?(r[a++]=192+(t>>>6),r[a++]=128+(63&t)):t<65536?(r[a++]=224+(t>>>12),r[a++]=128+(t>>>6&63),r[a++]=128+(63&t)):t<2097152?(r[a++]=240+(t>>>18),r[a++]=128+(t>>>12&63),r[a++]=128+(t>>>6&63),r[a++]=128+(63&t)):t<67108864?(r[a++]=248+(t>>>24),r[a++]=128+(t>>>18&63),r[a++]=128+(t>>>12&63),r[a++]=128+(t>>>6&63),r[a++]=128+(63&t)):(r[a++]=252+t/1073741824,r[a++]=128+(t>>>24&63),r[a++]=128+(t>>>18&63),r[a++]=128+(t>>>12&63),r[a++]=128+(t>>>6&63),r[a++]=128+(63&t));return r}(r.primaryState)):null,r.theme&&(n.theme=r.theme),r.clueFontSizeStep&&(n.clueFontSizeStep=parseInt(r.clueFontSizeStep)),r.emptyBoxOpacity&&(n.emptyBoxOpacity=parseFloat(r.emptyBoxOpacity))}else n=JSON.parse(document.getElementById("params").textContent);!function(){var n=document.getElementById("themerJS");if(n){var r=JSON.parse(n.textContent);window.customConfigFromFile=r}}(),window.websimApp&&(window.puzzleEnv.rawc=(" "+sessionStorage.getItem("rawc")).slice(1),sessionStorage.removeItem("rawc")),window.puzzleEnv=JSON.parse(document.getElementById("puzzleEnv").textContent);var t=function(){var n,r=window.puzzleEnv.rawc;try{var t=function(n){var r,t=n.split("");(r=[]).push(13);for(var e=36;e<n.length;e+=54){for(var o=e,i=(r[0],o),a=o+(c=13+o<n.length?14:n.length-o+1)-1;i<a;a--,i++){var u=t[a];t[a]=t[i],t[i]=u}e=o+=c}for((r=[]).push(13),e=0;e<n.length;e+=54){for(o=e,r[0],i=o,a=o+(c=13+o<n.length?14:n.length-o+1)-1;i<a;a--,i++)u=t[a],t[a]=t[i],t[i]=u;e=o+=c}for((r=[]).push(8),e=59;e<n.length;e+=63){for(o=e,r[0],i=o,a=o+(c=4+o<n.length?5:n.length-o+1)-1;i<a;a--,i++)u=t[a],t[a]=t[i],t[i]=u;e=o+=c}for((r=[]).push(6),e=21;e<n.length;e+=53){for(o=e,r[0],i=o,a=o+(c=14+o<n.length?15:n.length-o+1)-1;i<a;a--,i++)u=t[a],t[a]=t[i],t[i]=u;e=o+=c}for((r=[]).push(2),e=50;e<n.length;e+=59){for(o=e,r[0],i=o,a=o+(c=8+o<n.length?9:n.length-o+1)-1;i<a;a--,i++)u=t[a],t[a]=t[i],t[i]=u;e=o+=c}for((r=[]).push(7),e=64;e<n.length;e+=64){for(o=e,r[0],i=o,a=o+(c=3+o<n.length?4:n.length-o+1)-1;i<a;a--,i++)u=t[a],t[a]=t[i],t[i]=u;e=o+=c}for((r=[]).push(2),e=14;e<n.length;e+=61){var c;for(o=e,r[0],i=o,a=o+(c=6+o<n.length?7:n.length-o+1)-1;i<a;a--,i++)u=t[a],t[a]=t[i],t[i]=u;e=o+=c}return t.join("")}(r);n=JSON.parse(X(Y(t)))}catch(t){n=JSON.parse(X(Y(r)))}return n}();t.completionPuzzle&&n.showAnswers&&(t=t.completionPuzzle),Ar($,t,JSON.parse(X(Y(window.puzzleEnv.rawm))),n,$(".main_body"))},$((function(){!function(n){if("undefined"!=typeof window&&"undefined"!=typeof navigator){var r=navigator.userAgent.indexOf("Android ")>-1&&navigator.userAgent.indexOf("GuardianPuzzles-Android")>-1,t=navigator.userAgent.indexOf("PuzzleMe-iOS|")>-1&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;/((iPhone|iPod|iPad).*AppleWebKit(?!.*Version)|; wv)/i.test(navigator.userAgent)?t?(V=S.IOS,j=!0):r?(V=S.ANDROID,j=!0):V=S.WEB:"1"===n.websim?(V=S.WEBSIM,j=!0):V=S.WEB}}(un()),V!==S.ANDROID&&window.onReady()}))})()})();